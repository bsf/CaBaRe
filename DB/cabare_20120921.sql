/******************************************************************************/
/***          Generated by IBExpert 2012.04.18 26.09.2012 10:55:23          ***/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1251;

SET CLIENTLIB 'C:\PRG\DEV\IBExpert\fbclient.dll';

CREATE DATABASE 'LOCALHOST:D:\PRJ\BSF\CaBaRe\Output\DB\CABARE.GDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 16384
DEFAULT CHARACTER SET WIN1251 COLLATION WIN1251;



/******************************************************************************/
/***                               Generators                               ***/
/******************************************************************************/

CREATE GENERATOR BFW_INF_MSG_GEN;
SET GENERATOR BFW_INF_MSG_GEN TO 0;

CREATE GENERATOR CBR_GEN;
SET GENERATOR CBR_GEN TO 209;

CREATE GENERATOR CBR_GEN_DOC;
SET GENERATOR CBR_GEN_DOC TO 730;



/******************************************************************************/
/***                               Exceptions                               ***/
/******************************************************************************/

CREATE EXCEPTION BFW_SEC_RAISE 'ERROR';

CREATE EXCEPTION RAISE 'ERROR';



SET TERM ^ ; 



/******************************************************************************/
/***                           Stored Procedures                            ***/
/******************************************************************************/

CREATE PROCEDURE BFW_IDE_EV_UI_ITEM (
    URI_ VARCHAR(50))
RETURNS (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    GRP VARCHAR(50),
    MENUIDX INTEGER,
    OPTIONS VARCHAR(1024),
    PARAMS VARCHAR(1024),
    OUTS VARCHAR(1024),
    USEPERM INTEGER,
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50),
    ENT_EVIEW VARCHAR(100),
    ENT_VIEW_READONLY INTEGER,
    ENT_VIEW_PKEY VARCHAR(50),
    ENT_SQL_SELECT VARCHAR(1024),
    ENT_SQL_INSERT VARCHAR(1024),
    ENT_SQL_INSERTDEF VARCHAR(1024),
    ENT_SQL_UPDATE VARCHAR(1024),
    ENT_SQL_DELETE VARCHAR(1024),
    ENT_SQL_REFRESH VARCHAR(1024),
    ENT_SQL_TITLE VARCHAR(1024),
    UI_TITLE VARCHAR(250))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_IDE_EV_UI_ITEM_U (
    URI VARCHAR(50),
    TITLE VARCHAR(50),
    GRP VARCHAR(50),
    MENUIDX INTEGER,
    OPTIONS VARCHAR(1024),
    PARAMS VARCHAR(1024),
    OUTS VARCHAR(1024),
    USEPERM INTEGER,
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50),
    ENT_VIEW_READONLY INTEGER,
    ENT_VIEW_PKEY VARCHAR(50),
    ENT_SQL_SELECT VARCHAR(1024),
    ENT_SQL_INSERT VARCHAR(1024),
    ENT_SQL_INSERTDEF VARCHAR(1024),
    ENT_SQL_UPDATE VARCHAR(1024),
    ENT_SQL_DELETE VARCHAR(1024),
    ENT_SQL_REFRESH VARCHAR(1024),
    ENT_SQL_TITLE VARCHAR(1024))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_IDE_EV_UI_NEW (
    PKG_ VARCHAR(50))
RETURNS (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_IDE_EV_UI_NEW_U (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_INF_SP_MSG_POP (
    FROM_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    SDAT DATE,
    SENDER VARCHAR(38),
    TOPIC VARCHAR(50),
    TXT VARCHAR(250))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_INF_SP_MSG_PUSH (
    RECEIVER_ VARCHAR(38),
    TOPIC_ VARCHAR(50),
    TXT_ VARCHAR(250))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE (
    POLID_ VARCHAR(38),
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    USERID VARCHAR(38),
    USERNAME VARCHAR(50),
    PERM VARCHAR(50),
    STATE INTEGER,
    INHERITBY_POLID VARCHAR(38),
    INHERITBY_PERM VARCHAR(100),
    INHERITBY_RESID VARCHAR(38))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE_ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER,
    PERMID VARCHAR(38),
    RESID VARCHAR(38))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE__ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38),
    RES_PARENT_SQL_ VARCHAR(1024))
RETURNS (
    STATE INTEGER,
    PERMID VARCHAR(38),
    RESID VARCHAR(38))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_LIST (
    POLID VARCHAR(38))
RETURNS (
    PERMID VARCHAR(38),
    NAME VARCHAR(50),
    DESCRIPTION VARCHAR(250),
    INHERITBY VARCHAR(100))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_STATE_GET (
    PERMID VARCHAR(38),
    USERID VARCHAR(38),
    RESID VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_PERM_STATE_SET (
    PERMID VARCHAR(38),
    USERID VARCHAR(38),
    RESID VARCHAR(38),
    STATE INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_SEC_EV_POLICY_LIST (
    PARENTID VARCHAR(38))
RETURNS (
    POLID VARCHAR(38),
    NAME VARCHAR(50),
    RES_PROVID VARCHAR(38))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_POLICY_RESET (
    POLID_ VARCHAR(38))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_SEC_EV_POLICY_STATE_GET (
    POLID VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_EV_POLICY_STATE_SET (
    POLID VARCHAR(38),
    STATE INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_CHECK (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_CHECK_ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_CHECK__ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38),
    RES_PARENT_SQL_ VARCHAR(1024))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_DEMAND (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_DEMAND_USERS (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    USERID VARCHAR(38))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE BFW_SEC_SP_PERM_DEMAND2 (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_KORD_CREATE (
    ORD_ID_ INTEGER)
RETURNS (
    ID INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_MENU_ITEM (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    STATE_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_MENU_ITEM_U (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    STATE_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_MENU_LIST (
    ID_ INTEGER,
    SHOW_CLOSED_ INTEGER)
RETURNS (
    ID INTEGER,
    GRP VARCHAR(50),
    NAME VARCHAR(50),
    IDX INTEGER,
    ADDON_GRP VARCHAR(50),
    KITCHEN VARCHAR(50),
    STATE VARCHAR(50),
    UI_ROW_STYLE VARCHAR(50))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_MENU_NEW
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_MENU_NEW_U (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_ORD_CREATE (
    TBL_ID_ INTEGER)
RETURNS (
    ID INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_DEL (
    ID_ INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_ORD_DESK_MENU (
    GRP_ID_ INTEGER,
    PARENT_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    PARENT_ID INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_DETAIL_DEL (
    ID_ INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_ORD_DETAIL_NEW (
    HID_ INTEGER,
    MENU_ID_ INTEGER,
    PARENT_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    HID INTEGER,
    MENU_ID INTEGER,
    DISH VARCHAR(50),
    QTY DOUBLE PRECISION,
    PRICE DOUBLE PRECISION,
    SUMM DOUBLE PRECISION,
    PARENT_ID INTEGER,
    FKORD INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_DETAILS (
    ID_ INTEGER,
    HID_ INTEGER)
RETURNS (
    ID INTEGER,
    HID INTEGER,
    RECNO INTEGER,
    MENU_ID INTEGER,
    DISH VARCHAR(50),
    QTY DOUBLE PRECISION,
    PRICE DOUBLE PRECISION,
    SUMM DOUBLE PRECISION,
    FKORD INTEGER,
    PARENT_ID INTEGER,
    UI_ROW_STYLE VARCHAR(50))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_HEAD (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_LIST (
    ID_ INTEGER,
    DBEG_ DATE,
    DEND_ DATE)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_PAYT (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP,
    SUMM_PAYT DOUBLE PRECISION,
    SUMM_RET DOUBLE PRECISION)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_ORD_PAYT_U (
    ID_ INTEGER,
    SUMM_PAYT DOUBLE PRECISION)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_ORD_PRECHECK (
    ID INTEGER)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE CBR_EV_ORD_SELECTOR (
    DAT1_ DATE,
    DAT2_ DATE)
RETURNS (
    DAT1 DATE,
    DAT2 DATE,
    INFO VARCHAR(250))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_PRICE_LIST (
    DAT_ DATE,
    TYP_ID_ INTEGER)
RETURNS (
    MENU_ID INTEGER,
    DAT DATE,
    TYP_ID INTEGER,
    GRP VARCHAR(50),
    DISH VARCHAR(50),
    PRICE DOUBLE PRECISION,
    PRICE_NEW DOUBLE PRECISION)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_PRICE_LIST_SEL (
    DAT_ DATE,
    TYP_ID_ INTEGER)
RETURNS (
    DAT DATE,
    TYP_ID INTEGER,
    INFO VARCHAR(250))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE CBR_EV_PRICE_LIST_U (
    MENU_ID INTEGER,
    DAT DATE,
    TYP_ID INTEGER,
    PRICE_NEW DOUBLE PRECISION)
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE INF_RAISE (
    MSG_CODE VARCHAR(50))
AS
BEGIN
  EXIT;
END^





CREATE PROCEDURE INF_SP_ENUM_GET (
    TABLENAME_ VARCHAR(50),
    FIELDNAME_ VARCHAR(50),
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE INF_SP_ENUM_LOOKUP (
    TABLENAME_ VARCHAR(50),
    FIELDNAME_ VARCHAR(50),
    SHOWNONE_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50))
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE INF_SP_STATES_GET (
    TABLENAME_ VARCHAR(50),
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50),
    DRANGE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE INF_SP_STATES_LIST (
    TABLE_NAME_ VARCHAR(50))
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50),
    DRANGE INTEGER)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE UTL_EV_JRN_SELECTOR (
    DATE1_ DATE,
    DATE2_ DATE)
RETURNS (
    DATE1 DATE,
    DATE2 DATE)
AS
BEGIN
  SUSPEND;
END^





CREATE PROCEDURE UTL_EV_JRN_SELECTORINFO (
    USE_DRANGE_ INTEGER,
    DATE1_ DATE,
    DATE2_ DATE)
RETURNS (
    INFO VARCHAR(250))
AS
BEGIN
  SUSPEND;
END^






SET TERM ; ^



/******************************************************************************/
/***                                 Tables                                 ***/
/******************************************************************************/



CREATE TABLE BFW_ENT (
    ENTITYNAME   VARCHAR(38) NOT NULL,
    SCHEMENAME   VARCHAR(38),
    IS_SCHEME    INTEGER DEFAULT 0 NOT NULL,
    DESCRIPTION  VARCHAR(250)
);


CREATE TABLE BFW_ENT_FIELDS (
    ENTITYNAME      VARCHAR(38) NOT NULL,
    VIEWNAME        VARCHAR(38) NOT NULL,
    FIELDNAME       VARCHAR(38) NOT NULL,
    BAND            VARCHAR(50),
    TITLE           VARCHAR(50),
    VISIBLE         INTEGER DEFAULT 1 NOT NULL,
    READONLY        INTEGER DEFAULT 0 NOT NULL,
    EDITOR          VARCHAR(50),
    EDITOR_OPTIONS  VARCHAR(1024),
    OPTIONS         VARCHAR(1024),
    REQ             INTEGER DEFAULT 0 NOT NULL
);


CREATE TABLE BFW_ENT_VIEW_LINKS (
    ENTITYNAME         VARCHAR(38) NOT NULL,
    VIEWNAME           VARCHAR(38) NOT NULL,
    LINKED_ENTITYNAME  VARCHAR(38) NOT NULL,
    LINKED_VIEWNAME    VARCHAR(38) NOT NULL,
    LINKED_FIELD       VARCHAR(38)
);


CREATE TABLE BFW_ENT_VIEWS (
    ENTITYNAME     VARCHAR(38) NOT NULL,
    VIEWNAME       VARCHAR(38) NOT NULL,
    SQL_SELECT     VARCHAR(1024),
    SQL_INSERT     VARCHAR(1024),
    SQL_INSERTDEF  VARCHAR(1024),
    SQL_UPDATE     VARCHAR(1024),
    SQL_DELETE     VARCHAR(1024),
    SQL_REFRESH    VARCHAR(1024),
    SQL_TITLE      VARCHAR(1024),
    READONLY       INTEGER DEFAULT 1 NOT NULL,
    PKEY           VARCHAR(38),
    IS_EXEC        INTEGER DEFAULT 0 NOT NULL,
    TITLE          VARCHAR(50),
    OPTIONS        VARCHAR(1024)
);


CREATE TABLE BFW_INF_MSG (
    ID        INTEGER NOT NULL,
    STATUS    INTEGER DEFAULT 0 NOT NULL,
    SENDER    VARCHAR(38) DEFAULT USER NOT NULL,
    RECEIVER  VARCHAR(38) NOT NULL,
    TOPIC     VARCHAR(50) NOT NULL,
    TXT       VARCHAR(250) NOT NULL,
    IDAT      DATE DEFAULT 'NOW' NOT NULL,
    RDAT      DATE
);


CREATE TABLE BFW_SEC_ACL (
    PERMID  VARCHAR(38) NOT NULL,
    USERID  VARCHAR(38) NOT NULL,
    RESID   VARCHAR(38) NOT NULL,
    STATE   INTEGER NOT NULL
);


CREATE TABLE BFW_SEC_PERMISSIONS (
    PERMID             VARCHAR(38) NOT NULL,
    NAME               VARCHAR(50) NOT NULL,
    POLID              VARCHAR(38) NOT NULL,
    INHERITBY          VARCHAR(38),
    INHERITBY_RES_SQL  VARCHAR(1024),
    DESCRIPTION        VARCHAR(250)
);


CREATE TABLE BFW_SEC_POLICIES (
    POLID           VARCHAR(38) NOT NULL,
    NAME            VARCHAR(50) NOT NULL,
    PARENTID        VARCHAR(38),
    STATE           INTEGER NOT NULL,
    USE_RES         INTEGER NOT NULL,
    RES_PROVID      VARCHAR(38),
    RES_PARENT_SQL  VARCHAR(1024)
);


CREATE TABLE BFW_SEC_PROV (
    URI         VARCHAR(50) NOT NULL,
    ENTITYNAME  VARCHAR(50) NOT NULL
);


CREATE TABLE BFW_SEC_USER_ROLES (
    USERID  VARCHAR(38) NOT NULL,
    ROLEID  VARCHAR(38) NOT NULL
);


CREATE TABLE BFW_SEC_USERS (
    USERID  VARCHAR(38) NOT NULL,
    NAME    VARCHAR(50) NOT NULL,
    ISROLE  INTEGER DEFAULT 0 NOT NULL
);


CREATE TABLE BFW_UI (
    URI         VARCHAR(50) NOT NULL,
    CLS         VARCHAR(50) NOT NULL,
    ENTITYNAME  VARCHAR(50) NOT NULL,
    VIEWNAME    VARCHAR(50),
    TITLE       VARCHAR(50) NOT NULL,
    GRP         VARCHAR(50),
    MENUIDX     INTEGER DEFAULT 0 NOT NULL,
    OPTIONS     VARCHAR(1024),
    PARAMS      VARCHAR(1024),
    OUTS        VARCHAR(1024),
    USEPERM     INTEGER DEFAULT 0 NOT NULL,
    PKG         VARCHAR(50)
);


CREATE TABLE BFW_UI_CLS (
    CLS          VARCHAR(50) NOT NULL,
    VIEWNAME     VARCHAR(50) NOT NULL,
    DESCRIPTION  VARCHAR(250),
    IMG          BLOB SUB_TYPE 0 SEGMENT SIZE 8192,
    OPTIONS      VARCHAR(1024)
);


CREATE TABLE BFW_UI_CMD (
    URI               VARCHAR(50) NOT NULL,
    CMD               VARCHAR(50) NOT NULL,
    CAPTION           VARCHAR(50) NOT NULL,
    IDX               INTEGER DEFAULT 0 NOT NULL,
    GRP               VARCHAR(50),
    DEF               INTEGER DEFAULT 0 NOT NULL,
    HANDLER           VARCHAR(50),
    HANDLER_FOR       VARCHAR(1024),
    PARAMS            VARCHAR(1024),
    OUTS              VARCHAR(1024),
    OPTIONS           VARCHAR(1024),
    CONDITION         VARCHAR(1024),
    CONDITION_PARAMS  VARCHAR(1024),
    SHORTCUT          VARCHAR(50)
);


CREATE TABLE BFW_UI_GRP (
    GRP  VARCHAR(50) NOT NULL,
    IDX  INTEGER
);


CREATE TABLE BFW_UI_STYLES (
    ID       VARCHAR(50) NOT NULL,
    OPTIONS  VARCHAR(1024)
);


CREATE TABLE CBR_KITCHENS (
    ID       INTEGER NOT NULL,
    NAME     VARCHAR(50) NOT NULL,
    PRINTER  VARCHAR(50)
);


CREATE TABLE CBR_KORD (
    ID          INTEGER NOT NULL,
    DAT         DATE NOT NULL,
    IDAT        TIMESTAMP DEFAULT 'NOW',
    ORD_ID      INTEGER NOT NULL,
    KITCHEN_ID  INTEGER
);


CREATE TABLE CBR_KORDI (
    ID       INTEGER NOT NULL,
    HID      INTEGER NOT NULL,
    ORDI_ID  INTEGER NOT NULL
);


CREATE TABLE CBR_MENU (
    ID            INTEGER NOT NULL,
    NAME          VARCHAR(50) NOT NULL,
    GRP_ID        INTEGER,
    STATE_ID      INTEGER DEFAULT 0 NOT NULL,
    UNT           VARCHAR(10),
    IDX           INTEGER,
    ADDON_GRP_ID  INTEGER,
    KITCHEN_ID    INTEGER
);


CREATE TABLE CBR_MENU_GRP (
    ID            INTEGER NOT NULL,
    NAME          VARCHAR(50) NOT NULL,
    ADDON_GRP_ID  INTEGER,
    IS_ADDON      INTEGER DEFAULT 0 NOT NULL,
    IDX           INTEGER
);


CREATE TABLE CBR_ORD (
    ID             INTEGER NOT NULL,
    DAT            DATE NOT NULL,
    STATE_ID       INTEGER DEFAULT 0 NOT NULL,
    IUSR           VARCHAR(50) DEFAULT USER,
    IDAT           TIMESTAMP DEFAULT 'NOW',
    PUSR           VARCHAR(50),
    PDAT           DATE,
    TBL_ID         INTEGER NOT NULL,
    PRICE_TYP_ID   INTEGER NOT NULL,
    LAST_ACT_TIME  TIMESTAMP DEFAULT 'NOW',
    PAYT_SUMM      DOUBLE PRECISION,
    PAYT_TIME      TIMESTAMP
);


CREATE TABLE CBR_ORDI (
    ID         INTEGER NOT NULL,
    HID        INTEGER NOT NULL,
    MENU_ID    INTEGER NOT NULL,
    QTY        DOUBLE PRECISION NOT NULL,
    PRICE      DOUBLE PRECISION NOT NULL,
    KORD_ID    INTEGER,
    PARENT_ID  INTEGER
);


CREATE TABLE CBR_PRICE (
    ID       INTEGER NOT NULL,
    MENU_ID  INTEGER NOT NULL,
    TYP_ID   INTEGER NOT NULL,
    DAT      DATE NOT NULL,
    PRICE    DOUBLE PRECISION NOT NULL
);


CREATE TABLE CBR_PRICE_TYP (
    ID    INTEGER NOT NULL,
    NAME  VARCHAR(50) NOT NULL
);


CREATE TABLE CBR_ROOMS (
    ID    INTEGER NOT NULL,
    NAME  VARCHAR(25) NOT NULL
);


CREATE TABLE CBR_TBL (
    ID        INTEGER NOT NULL,
    NAME      VARCHAR(25) NOT NULL,
    ROOM_ID   INTEGER NOT NULL,
    STATE_ID  INTEGER DEFAULT 0 NOT NULL
);


CREATE TABLE INF_ENUM (
    TABLENAME  VARCHAR(50) NOT NULL,
    FIELDNAME  VARCHAR(50) NOT NULL,
    ID         INTEGER NOT NULL,
    NAME       VARCHAR(50) NOT NULL,
    CODE       VARCHAR(50)
);


CREATE TABLE INF_MSG (
    CODE  VARCHAR(50) NOT NULL,
    MSG   VARCHAR(70) NOT NULL
);


CREATE TABLE INF_STATES (
    TABLENAME  VARCHAR(50) NOT NULL,
    ID         INTEGER NOT NULL,
    CODE       VARCHAR(50),
    NAME       VARCHAR(50) NOT NULL,
    DRANGE     INTEGER DEFAULT 0 NOT NULL
);


INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_META', 'BFW', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_UI', 'BFW', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_SEC_PERM', 'BFW_SEC', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_SEC_POLICY', 'BFW_SEC', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_SEC_PROV', 'BFW_SEC', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_SEC_USER', 'BFW_SEC', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_INF_MSG', 'BFW1', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE', 'BFW_IDE', 0, 'BFW IDE');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_ENT', 'BFW_IDE', 0, '');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_EVIEW', 'BFW_IDE', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_UI', 'BFW_IDE', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_UI_CLS', 'BFW_IDE', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_UI_FIELDS', 'BFW_IDE', 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('BFW_IDE_UI_CMD', 'BFW_IDE', 0, 'UI Commands');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_MENU', NULL, 0, 'Меню');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_UI', NULL, 0, 'CaBaRe UI');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_MENU_GRP', NULL, 0, 'Группы меню');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_TBL', NULL, 0, 'Столы');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_ROOM', NULL, 0, 'Залы');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_PRICE', NULL, 0, 'Прайс');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_PRICE_TYP', NULL, 0, 'Виды цен');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_WD_VIEW', NULL, 0, 'WaiterDeskView');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_ORD_DESK', NULL, 0, 'OrderDeskView');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_KORD', NULL, 0, 'KitchenOrder');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_ORD', NULL, 0, 'Заказ');
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('UTL_JRN', NULL, 0, NULL);
INSERT INTO BFW_ENT (ENTITYNAME, SCHEMENAME, IS_SCHEME, DESCRIPTION) VALUES ('CBR_KITCHEN', NULL, 0, NULL);

COMMIT WORK;

INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'URI', NULL, NULL, 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_EVIEW', '-', 'SQL_SELECT', NULL, NULL, 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_EVIEW', '-', 'SQL_INSERT', NULL, NULL, 1, 0, 'MEMO', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_EVIEW', '-', 'SQL_UPDATE', NULL, NULL, 1, 0, 'MEMO', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_EVIEW', '-', 'SQL_REFRESH', NULL, NULL, 1, 0, 'MEMO', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'URI', NULL, NULL, 1, 1, NULL, NULL, 'Style=Style.InfoBk', 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_SELECT', 'Entity', 'SQL Select', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_UPDATE', 'Entity', 'SQL Update', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'ENT', NULL, 'Entity', 1, 0, 'Lookup', 'Entity=BFW_IDE_ENT;EView=Lookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT', 'Entity', NULL, 0, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'PKG', 'Misc', 'Package', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_VIEW', 'Entity', NULL, 0, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'GRP', 'Main menu', 'Group', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'MENUIDX', 'Main menu', 'Index', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_INSERT', 'Entity', 'SQL Insert', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_DELETE', 'Entity', 'SQL Delete', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_REFRESH', 'Entity', 'SQL Refresh', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_INSERTDEF', 'Entity', 'SQL InsertDef', 1, 0, 'Memo', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'USEPERM', 'Misc', 'Use permission', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'PARAMS', 'IN OUT', 'Input params', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'OUTS', 'IN OUT', 'Output params', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_EVIEW', 'Entity', 'EntityView', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'CLS', NULL, 'Class', 1, 1, NULL, NULL, 'Style=Style.Bold', 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'TITLE', NULL, 'Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'OPTIONS', NULL, 'Options', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'CLS', NULL, 'Class', 1, 0, 'Lookup', 'Entity=BFW_IDE_UI_CLS;EView=Lookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_VIEW_PKEY', 'Entity', 'Primary Keys', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_VIEW_READONLY', 'Entity', 'ReadOnly', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'URI', NULL, NULL, 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_CLS', '-', 'IMG', NULL, 'UI View', 1, 0, 'Image', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_CLS', '-', 'CLS', NULL, 'Class', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'READONLY', NULL, 'ReadOnly', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'VISIBLE', '', 'Visible', 1, 0, 'CheckBox', 'AllowGrayed', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'REQ', NULL, 'Required', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'ENTITYNAME', NULL, 'Entity', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'VIEWNAME', NULL, 'EntityView', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'FIELDNAME', NULL, 'FieldName', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'BAND', NULL, 'Band', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'TITLE', NULL, 'Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'VISIBLE', NULL, 'Visible', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'READONLY', NULL, 'ReadOnly', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'EDITOR', NULL, 'Editor', 1, 0, '', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'EDITOR_OPTIONS', NULL, 'EditorOptions', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'OPTIONS', NULL, 'Options', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'REQ', NULL, 'Required', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'ENTITYNAME', NULL, 'Entity', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'VIEWNAME', NULL, 'EntityView', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'FIELDNAME', NULL, 'FieldName', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'BAND', NULL, 'Band', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'TITLE', NULL, 'Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'EDITOR', NULL, 'Editor', 1, 0, '', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'EDITOR_OPTIONS', NULL, 'EditorOptions', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'OPTIONS', NULL, 'Options', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE', 'Packages', 'ID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('-', '-', 'ID', NULL, 'Код', 0, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'NAME', NULL, 'Название блюда', 1, 0, NULL, NULL, NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'List', 'NAME', NULL, 'Блюдо', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('-', '-', 'STATE_ID', NULL, 'Статус', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('-', '-', 'STATE', NULL, 'Статус', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'STATE_ID', NULL, 'Статус', 1, 0, 'Lookup', 'Entity=CBR_MENU;EView=Lookup', '', 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'NAME', NULL, 'Название блюда', 1, 0, NULL, NULL, NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'STATE_ID', NULL, 'Статус', 1, 0, 'Lookup', 'Entity=CBR_MENU;EView=States', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('-', '-', 'NAME', NULL, 'Наименование', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'GRP_ID', NULL, 'Группа', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=Lookup', NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'GRP_ID', NULL, 'Группа', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=Lookup', NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'List', 'GRP', NULL, 'Группа', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_KITCHEN', 'List', 'PRINTER', NULL, 'Принтер', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'MENU_ID', NULL, 'Код', 0, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_KITCHEN', 'New', 'PRINTER', NULL, 'Принтер', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'DAT', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'TYP_ID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'DISH', NULL, 'Блюдо', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'UNT', NULL, 'Порция', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'PRICE', NULL, 'Цена', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'PRICE_NEW', NULL, 'Новая цена', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'ID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'PARENT_ID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'Item', 'IS_ADDON', NULL, 'Модификаторы?', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'New', 'IS_ADDON', NULL, 'Модификаторы?', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_TBL', 'List', 'ROOM', NULL, 'Зал', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_TBL', 'New', 'ROOM_ID', NULL, 'Зал', 1, 0, 'Lookup', 'Entity=CBR_ROOM;EView=Lookup', NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'List', 'GRP', NULL, 'Группа', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_TBL', 'Item', 'ROOM_ID', NULL, 'Зал', 1, 0, 'Lookup', 'Entity=CBR_ROOM;EView=Lookup', NULL, 1);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_TBL', 'Item', 'STATE_ID', NULL, 'Статус', 1, 0, 'Lookup', 'Entity=CBR_TBL;EView=States', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'List', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'Selector', 'DAT', NULL, 'Дата', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_PRICE', 'Selector', 'TYP_ID', NULL, 'Тип цен', 1, 0, 'Lookup', 'Entity=CBR_PRICE_TYP;EView=Lookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_KITCHEN', 'Item', 'PRINTER', NULL, 'Принтер', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'ID', NULL, '№', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'DAT', NULL, 'Дата', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'ROOM', NULL, 'Зал', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'TBL', NULL, 'Стол', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE', 'Packages', 'NAME', NULL, 'Packages', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'CLS', NULL, 'Class', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'GRP', NULL, 'Menu group', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'MENUIDX', NULL, 'Menu index', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'TITLE', NULL, 'Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'PKG', NULL, NULL, 0, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'ENTITYNAME', NULL, 'Entity', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'VIEWNAME', NULL, 'Entity View', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'OPTIONS', NULL, 'Options', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'PARAMS', NULL, 'Params', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'OUTS', NULL, 'Outs', 0, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'List', 'USEPERM', NULL, 'Use permission', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'ENT_VIEW', NULL, 'Entity View', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'PKG', NULL, 'Package', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'New', 'TITLE', NULL, 'Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('BFW_IDE_UI', 'Item', 'ENT_SQL_TITLE', 'Entity', 'SQL Title', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Selector', 'DAT1', NULL, 'С даты', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Selector', 'DAT2', NULL, 'По дату', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Selector', 'INFO', NULL, NULL, 0, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'DAT', NULL, 'Дата', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'ROOM', NULL, 'Зал', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'TBL', NULL, 'Стол', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'IDAT', NULL, 'Время открытия', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'SUMM', '', 'Сумма, грн', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'List', 'ID', NULL, '№', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'HID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'MENU_ID', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'FKORD', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'QTY', NULL, 'кол-во', 1, 0, NULL, NULL, 'Style=Style.Bold', 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'DISH', NULL, 'Блюдо', 1, 0, NULL, NULL, 'Style=Style.Bold', 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'SUMM', NULL, 'Сумма, грн', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'Head', 'IDAT', NULL, 'Время открытия', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'DetailItems', 'NAME', NULL, 'Блюдо', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'DetailItems', 'QTY', NULL, 'Кол-во', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'DetailItems', 'SUMM', NULL, 'Сумма, грн', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'DetailKOrd', 'ID', NULL, '№', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'DetailKOrd', 'IDAT', NULL, 'Время открытия', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'ID', NULL, '№', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'DAT', NULL, 'Дата', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'ROOM', NULL, 'Зал', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'TBL', NULL, 'Стол', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'SUMM', NULL, 'Сумма, грн', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'IDAT', NULL, 'Время открытия', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'List', 'IS_ADDON', NULL, 'Модификаторы?', 1, 0, 'CheckBox', NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD', 'HeadEdit', 'STATE', NULL, 'Статус', 1, 1, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'List', 'ADDON_GRP', NULL, 'Группа модификаторов', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'Item', 'ADDON_GRP_ID', NULL, 'Группа модификаторов', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=AddonLookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_ORD_DESK', 'Items', 'RECNO', NULL, NULL, -1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'Item', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'New', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU_GRP', 'New', 'ADDON_GRP_ID', NULL, 'Группа модификаторов', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=AddonLookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'List', 'IDX', NULL, 'Порядок', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'List', 'ADDON_GRP', NULL, 'Группа модификаторов', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'ADDON_GRP_ID', NULL, 'Группа модификаторов', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=AddonLookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'ADDON_GRP_ID', NULL, 'Группа модификаторов', 1, 0, 'Lookup', 'Entity=CBR_MENU_GRP;EView=AddonLookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'List', 'KITCHEN', NULL, 'Кухня', 1, 0, NULL, NULL, NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'Item', 'KITCHEN_ID', NULL, 'Кухня', 1, 0, 'Lookup', 'Entity=CBR_KITCHEN;EView=Lookup', NULL, 0);
INSERT INTO BFW_ENT_FIELDS (ENTITYNAME, VIEWNAME, FIELDNAME, BAND, TITLE, VISIBLE, READONLY, EDITOR, EDITOR_OPTIONS, OPTIONS, REQ) VALUES ('CBR_MENU', 'New', 'KITCHEN_ID', NULL, 'Кухня', 1, 0, 'Lookup', 'Entity=CBR_KITCHEN;EView=Lookup', NULL, 0);

COMMIT WORK;

INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_UI', 'List', 'select i.uri, i.cls, i.entityname, coalesce(i.viewname, c.viewname) viewname,
           i.title, i.grp, i.menuidx, i.useperm,
           i.options, i.params, i.outs
    from bfw_ui i
         left join bfw_ui_cls c on (i.cls = c.cls)
         left join bfw_ui_grp g on (g.grp = i.grp)
    order by g.idx, i.menuidx, i.title', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_UI', 'Commands', 'select cmd.idx, cmd.* from bfw_ui_cmd cmd where cmd.uri = :uri
union
select cmd.idx, cmd.* from bfw_ui ui left join bfw_ui_cmd cmd on (cmd.uri = ui.cls)
where ui.uri = :uri and cmd.uri is not null
      and not exists(select * from bfw_ui_cmd cmdr where cmdr.uri = ui.uri and cmdr.cmd = cmd.cmd)
      and :APP_VER > 20120410
order by 1', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_UI', 'Styles', 'select * from bfw_ui_styles', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'Entities', 'select entityname from bfw_ent', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'Fields', 'select * from bfw_ent_fields where entityname = :entityname and viewname = :viewname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'Entity', 'select * from bfw_ent where entityname = :entityname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'View', 'select * from bfw_ent_views where entityname = :entityname and viewname = :viewname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'ViewLinks', 'select * from bfw_ent_view_links where entityname = :entityname and viewname = :viewname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_META', 'ViewLinkedFields', 'select * from bfw_ent_view_links  where linked_entityname = :entityname and linked_viewname = :viewname and coalesce(linked_field, '''') <> ''''', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_POLICY', 'List', 'select * from bfw_sec_ev_policy_list(:ParentID) order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_USER', 'List', 'select userid, name, isrole from bfw_sec_users order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PERM', 'List', 'select * from bfw_sec_ev_perm_list(:polid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_USER', 'Item', 'select userid, name, isrole from bfw_sec_users where userid= :userid', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PERM', 'Effective', 'select * from bfw_sec_ev_perm_effective(:polid, :permid, :resid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PROV', 'List', 'select * from bfw_sec_prov', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_USER', 'UserRoleCheck', 'select count(*) status from bfw_sec_user_roles  where userid = :userid and roleid = :roleid', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PERM', 'StateGet', 'select state from bfw_sec_ev_perm_state_get(:permid, :userid, :resid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_POLICY', 'StateGet', 'select state from bfw_sec_ev_policy_state_get(:polid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PERM', 'StateSet', 'execute procedure bfw_sec_ev_perm_state_set(:permid, :userid, :resid, :state)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_POLICY', 'StateSet', 'execute procedure bfw_sec_ev_policy_state_set(:polid, :state)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_USER', 'UserRoleAdd', 'insert into bfw_sec_user_roles(userid, roleid) values(:userid, :roleid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_USER', 'UserRoleRemove', 'delete from bfw_sec_user_roles where userid = :userid and roleid = :roleid', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_PERM', 'Check', 'select state from bfw_sec_sp_perm_check(:permid, :userid, :resid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_SEC_POLICY', 'Reset', 'execute procedure bfw_sec_ev_policy_reset(:polid)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_INF_MSG', 'POP', 'select * from bfw_inf_sp_msg_pop(:last_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_INF_MSG', 'PUSH', 'execute procedure bfw_inf_sp_msg_push(:receiver, :topic, :txt)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_INF_MSG', 'MARK', 'update bfw_inf_msg set status = 1 where id = :id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_CLS', 'Item', 'select * from bfw_ui_cls where cls = :ID', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_ENT', 'List', 'select * from bfw_ent order by entityname', NULL, NULL, NULL, NULL, 'select * from bfw_ent where entityname = :entityname', NULL, 1, 'entityname', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_ENT', 'Item', 'select * from bfw_ent where entityname = :id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_EVIEW', 'List', 'select * from bfw_ent_views ev  where entityname = :entityname', NULL, NULL, NULL, NULL, 'select * from bfw_ent_views ev  where entityname = :entityname and viewname = :viewname', NULL, 1, 'entityname;viewname', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_EVIEW', 'Item', 'select ev.*, ev.entityname || '':'' ||ev.viewname as ui_title 
from bfw_ent_views ev  
where entityname = :entityname and viewname = :viewname', NULL, NULL, NULL, NULL, NULL, NULL, 0, 'entityname;viewname', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE', 'Packages', 'select distinct coalesce(ui.pkg, ''-'') id, coalesce(ui.pkg, ''-'') name
from bfw_ui ui
order by 2', NULL, NULL, NULL, NULL, '', NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI', 'Item', 'select * from bfw_ide_ev_ui_item(:uri)', NULL, NULL, 'execute procedure bfw_ide_ev_ui_item_u(:uri, :title, :grp, :menuidx, :options, 
:params, :outs, :useperm, :pkg, 
:ent, :ent_view, :ent_view_readonly, :ent_view_pkey, :ent_sql_select, :ent_sql_insert, :ent_sql_insertdef,
 :ent_sql_update,:ent_sql_delete,:ent_sql_refresh, :ent_sql_title)', NULL, NULL, NULL, 0, 'uri', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI', 'New', 'select * from bfw_ide_ev_ui_new(:pkg)', NULL, NULL, 'execute procedure bfw_ide_ev_ui_new_u(:uri, :cls, :title, :pkg, :ent, :ent_view)', NULL, NULL, NULL, 0, 'URI', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI', 'List', 'select * from bfw_ui ui where coalesce(pkg, ''-'') = :pkg order by uri', NULL, NULL, NULL, NULL, 'select * from bfw_ui where uri = :uri and coalesce(pkg, ''-'') = :pkg', NULL, 1, 'uri', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_FIELDS', 'List', 'select * from bfw_ent_fields 
where entityname = :entityname 
            and (viewname = :viewname or viewname = ''-'')', NULL, '', '', NULL, 'select * from bfw_ent_fields f 
where f.entityname = :entityname and f.viewname = :viewname and f.fieldname = :fieldname', NULL, 1, 'FIELDNAME', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_ENT', 'Lookup', 'select entityname id,  entityname name from bfw_ent where is_scheme = 0 order by entityname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_CLS', 'Lookup', 'select cls id, cls name from bfw_ui_cls order by cls', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_FIELDS', 'Item', 'select * from bfw_ent_fields
where entityname = :entityname and viewname = :viewname and fieldname = :fieldname', NULL, NULL, 'update bfw_ent_fields 
set band = :band,  title = :title, visible = :visible, readonly = :readonly, req = :req,
       editor = :editor, editor_options = :editor_options, options = :options
where entityname = :entityname and viewname = :viewname and fieldname = :fieldname', NULL, NULL, NULL, 0, 'FIELDNAME', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_FIELDS', 'New', 'select   f.*
from bfw_ent_fields f
where f.entityname = :entityname and f.viewname = :viewname and f.fieldname is null', 'insert into bfw_ent_fields(entityname, viewname, fieldname, band, title, visible, readonly, editor, editor_options, options, req )
values(:entityname, :viewname, :fieldname, :band, :title, :visible, :readonly, :editor, :editor_options, :options, :req)', 'select e.entityname, ev.viewname, cast(1 as integer) visible, cast(0 as integer) readonly, cast(0 as integer) req
from bfw_ent e left join bfw_ent_views ev on (e.entityname = ev.entityname)
where e.entityname = :entityname and ev.viewname = :viewname', '', NULL, NULL, NULL, 0, 'FIELDNAME', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI', 'ListTitle', 'select distinct coalesce(pkg, ''-'') title from bfw_ui where  coalesce(pkg, ''-'') = :pkg', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_ENT', 'New', 'select entityname, description from bfw_ent  where entityname is null', 'insert into bfw_ent(entityname, description, is_scheme)
values(:entityname, :description, 0)', '', NULL, NULL, NULL, NULL, 0, 'ENTITYNAME', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_CMD', 'List', 'select * from bfw_ui_cmd 
where uri = :uri
order by uri', NULL, NULL, NULL, NULL, 'select * from bfw_ui_cmd where uri = :uri and cmd = :cmd', NULL, 1, 'URI;CMD', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_CMD', 'Item', 'select * from bfw_ui_cmd where uri = :uri and cmd = :cmd', NULL, NULL, 'update bfw_ui_cmd
set caption = :caption, idx = :idx, grp = :grp, def = :def,   
       params = :params,  outs = :outs,  handler = :handler , handler_for = :handler_for, options = :options, 
       condition = :condition, condition_params = :condition_params,
       shortcut = :shortcut
where uri = :uri and cmd = :cmd', NULL, NULL, NULL, 0, 'URI,CMD', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_UI_CMD', 'New', 'select * from bfw_ui_cmd where uri = :uri and cmd is null', 'insert into bfw_ui_cmd(uri, cmd, caption, grp, def, idx, handler, handler_for, params, options, condition, condition_params, shortcut)
values(:uri, :cmd, :caption, :grp, :def, :idx, :handler, :handler_for, :params, :options, :condition,  :condition_params, :shortcut)', 'select uri, cast(0 as integer) idx, cast(0 as integer) def from bfw_ui where uri = :uri', NULL, NULL, NULL, NULL, 0, 'URI;CMD', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_EVIEW', 'New', 'select * from bfw_ent_views where entityname = :entityname and entityname is null', 'insert into bfw_ent_views(entityname, viewname, sql_select) values(:entityname, :viewname, :sql_select)', 'select entityname from bfw_ent where entityname = :entityname', NULL, NULL, NULL, NULL, 0, 'entityname,viewname', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('BFW_IDE_EVIEW', 'ListTitle', 'select entityname from bfw_ent where entityname = :entityname', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU', 'List', 'select * from cbr_ev_menu_list(null, 1)', NULL, NULL, NULL, 'delete from cbr_menu where id = :id', 'select * from cbr_ev_menu_list(:id, 1)', NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE_TYP', 'List', 'select id, name from cbr_price_typ order by name', NULL, NULL, NULL, 'delete from cbr_price_typ where id = :id', 'select * from cbr_price_typ where id = :id', NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU', 'New', 'select * from cbr_ev_menu_new', '', '', 'execute procedure cbr_ev_menu_new_u(:id, :name, :grp_id, :idx, :addon_grp_id, :kitchen_id)', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE_TYP', 'New', 'select id, name from cbr_price_typ where id is null', 'insert into cbr_price_typ(id, name) values(:id, :name)', 'select gen_id(cbr_gen, 1) id from rdb$database', NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE_TYP', 'Item', 'select id, name from cbr_price_typ where id = :id', NULL, NULL, 'update cbr_price_typ set name = :name where id = :id', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE', 'List', 'select * from cbr_ev_price_list(:dat, :typ_id)', NULL, NULL, 'execute procedure cbr_ev_price_list_u(:menu_id, :dat, :typ_id, :price_new)', NULL, NULL, NULL, 0, 'MENU_ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU', 'States', 'select * from inf_sp_enum_lookup(''CBR'', ''-'', 1)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU', 'Item', 'select * from cbr_ev_menu_item(:id)', NULL, NULL, 'execute procedure cbr_ev_menu_item_u(:id, :name, :grp_id, :state_id, :idx, :addon_grp_id, :kitchen_id)', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_UI', 'MainMenu', 'select  u.uri, u.title from bfw_ui u 
where u.pkg = ''CBR'' and coalesce(u.grp, '''') <> '''' and u.menuidx <> -1 and cast(''today'' as date) < ''17.10.2012''
order by u.menuidx', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU_GRP', 'List', 'select g.id, g.name, g.idx, a.name addon_grp, g.is_addon 
from cbr_menu_grp g left join cbr_menu_grp a on (g.addon_grp_id = a.id) 
order  by g.idx', NULL, NULL, NULL, 'delete from cbr_menu_grp where id = :id', 'select g.id, g.name, g.idx, a.name addon_grp, g.is_addon 
from cbr_menu_grp g left join cbr_menu_grp a on (g.addon_grp_id = a.id) 
where g.id = :id', NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU_GRP', 'New', 'select id, name, idx, is_addon, addon_grp_id from cbr_menu_grp where id is null', 'insert into cbr_menu_grp(id, name, idx, is_addon, addon_grp_id) values(:id, :name, :idx, :is_addon, :addon_grp_id)', 'select gen_id(cbr_gen, 1) id, 0 as is_addon from rdb$database', NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU_GRP', 'Item', 'select id, name, idx, is_addon, addon_grp_id from cbr_menu_grp where id = :id', NULL, NULL, 'update cbr_menu_grp set name = :name, idx = :idx, is_addon = :is_addon, addon_grp_id = :addon_grp_id where id = :id', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU_GRP', 'Lookup', 'select id, name from cbr_menu_grp order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_TBL', 'List', 'select t.id, t.name, r.name room, 
(select e.name from inf_sp_enum_get(''cbr'', ''-'', t.state_id) e)  state
from  cbr_tbl t left join cbr_rooms r on (r.id = t.room_id)', NULL, NULL, NULL, 'delete from cbr_tbl where id = :id', 'select t.id, t.name, r.name room, 
(select e.name from inf_sp_enum_get(''cbr'', ''-'', t.state_id) e)  state
from  cbr_tbl t  left join cbr_rooms r on (r.id = t.room_id) where t.id = :id', NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_TBL', 'New', 'select id, name, room_id from cbr_tbl where id is null', 'insert into cbr_tbl(id, name, room_id, state_id) values(:id, :name, :room_id, 1)', 'select gen_id(cbr_gen, 1) id from rdb$database', NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ROOM', 'Lookup', 'select id, name from cbr_rooms order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ROOM', 'List', 'select id, name from cbr_rooms', NULL, NULL, NULL, 'delete from cbr_rooms where id = :id', 'select id, name from cbr_rooms where id = :id', NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ROOM', 'New', 'select id, name from cbr_rooms where id is null', 'insert into cbr_rooms(id, name) values(:id, :name)', 'select gen_id(cbr_gen, 1) id from rdb$database', NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_TBL', 'Item', 'select id, name, room_id, state_id from cbr_tbl where id = :id', NULL, NULL, 'update cbr_tbl set name = :name, room_id = :room_id, state_id = :state_id where id = :id', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_TBL', 'States', 'select * from inf_sp_enum_lookup(''CBR'', ''-'', 1)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ROOM', 'Item', 'select id, name from cbr_rooms where id = :id', NULL, NULL, 'update cbr_rooms set name = :name where id = :id', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE_TYP', 'Lookup', 'select id, name from cbr_price_typ order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE', 'Selector', 'select * from cbr_ev_price_list_sel(:dat, :typ_id)', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_WD_VIEW', 'Tables', 'select t.id, r.name room, t.name 
from cbr_tbl t left join cbr_rooms r on (r.id = t.room_id) 
where (t.room_id = :room_id) or (:room_id = -1)
order by r.name, t.name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_PRICE', 'SelectorInfo', 'select * from cbr_ev_price_list_sel(:dat, :typ_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'Menu', 'select * from cbr_ev_ord_desk_menu(:grp_id, :parent_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'Payt', 'select * from cbr_ev_ord_payt(:id)', NULL, NULL, 'execute procedure cbr_ev_ord_payt_u(:id, :summ_payt)', NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'Header', 'select h.id, t.name tbl, r.name room,  h.idat, 
          h.state_id,
          (select e.name from inf_sp_enum_get(''cbr_ord'', ''state_id'', h.state_id) e)  state,
         sum(i.qty * i.price) summ
from cbr_ord h
     left join cbr_tbl t on (h.tbl_id = t.id) 
     left join cbr_rooms r on (r.id = t.room_id)
     left join cbr_ordi i on (i.hid = h.id)
where h.id = :id
group by h.id, t.name, r.name, h.idat, h.state_id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_WD_VIEW', 'TableInfo', 'select t.id, r.name room, t.name from cbr_tbl t left join cbr_rooms r on (r.id = t.room_id)  where t.id = :tbl_id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_WD_VIEW', 'Orders', 'select h.id, 
         (select e.name from inf_sp_enum_get(''cbr_ord'', ''state_id'', h.state_id) e)  state,
        h.last_act_time, 
        sum(i.qty * i.price) summ
from cbr_ord h    
     left join cbr_ordi i on (i.hid = h.id)
where h.tbl_id = :tbl_id and h.state_id < 3
group by   h.last_act_time, h.state_id,  h.id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'States', 'select * from inf_sp_states_list(''CBR_ORD'')', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('UTL_JRN', 'Selector', 'select * from utl_ev_jrn_selector(:date1, :date2)', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('UTL_JRN', 'SelectorInfo', 'select * from utl_ev_jrn_selectorinfo(:use_drange, :date1, :date2)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'MenuGrp', 'select g.id, g.name from cbr_menu_grp g
where  g.is_addon = 0 and
 exists(select * from cbr_menu m where m.grp_id = g.id and m.state_id = 1)
order by g.idx', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'CreateHeader', 'select * from cbr_ev_ord_create(:tbl_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('UTL_JRN', 'States', 'select * from utl_ev_jrn_states(:tablename)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'Head', 'select * from cbr_ev_ord_head(:id)', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'Items', 'select * from cbr_ev_ord_details(null, :hid)', 'insert into cbr_ordi(id, hid, menu_id, qty, price, parent_id) values(:id, :hid, :menu_id, :qty, :price, :parent_id)', '', 'update cbr_ordi set qty = :qty where id = :id', 'execute procedure cbr_ev_ord_detail_del(:id)', 'select * from cbr_ev_ord_details(:id, null)', NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'KOrd', 'select * from cbr_ev_kord_create(:ord_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_KORD', 'Create', 'select * from cbr_ev_kord_create(:ord_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'PreCheck', 'execute procedure cbr_ev_ord_precheck(:id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD_DESK', 'ItemInit', 'select * from cbr_ev_ord_detail_new(:hid, :menu_id, :parent_id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'Payt', 'update cbr_ord set state_id = 3 where id = :id', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_WD_VIEW', 'Rooms', 'select id, name from cbr_rooms', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'List', 'select * from cbr_ev_ord_list(null, :dat1, :dat2)', NULL, NULL, NULL, NULL, 'select * from cbr_ev_ord_list(:id, :dat1, :dat2)', NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_MENU_GRP', 'AddonLookup', 'select id, name from cbr_menu_grp where  is_addon = 1', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'Selector', 'select * from cbr_ev_ord_selector(:dat1, :dat2)', NULL, '', NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'SelectorInfo', 'select * from cbr_ev_ord_selector(:date1, :date2)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'DetailItems', 'select m.id,
        m.name, sum(i.qty) qty, sum(i.qty * i.price) summ
from  cbr_ordi i
     left join cbr_menu m on (i.menu_id = m.id)
where i.hid = :hid
group by m.id, m.name
order by m.name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, 'Блюда', NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'DetailKOrd', 'select h.id, h.idat from cbr_kord h where h.ord_id = :hid', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, 'Бегунки', NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_KITCHEN', 'List', 'select * from cbr_kitchens order by name', '', '', 'update cbr_kitchens set name = :name where id = :id', 'delete from cbr_kitchens where id = :id', 'select * from cbr_kitchens where id = :id', NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'HeadEdit', 'select * from cbr_ev_ord_head(:id)', NULL, NULL, NULL, NULL, NULL, NULL, 0, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'BackToActive', 'update cbr_ord set state_id = 1 where id = :id', NULL, NULL, NULL, NULL, NULL, NULL, 1, 'ID', 1, '', NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'ItemURI', 'select h.id , cast(''views.CBR_ORDER.Desk'' as varchar(50)) uri
from cbr_ord h where h.id = :id and state_id < 2
union all
select h.id , cast(''views.CBR_ORDER.Payt'' as varchar(50)) uri
from cbr_ord h where h.id = :id and state_id = 2', NULL, NULL, NULL, NULL, NULL, NULL, 1, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_ORD', 'Delete', 'execute procedure cbr_ev_ord_del(:id)', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 1, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_KITCHEN', 'New', 'select * from cbr_kitchens where id  is null', 'insert into cbr_kitchens(id, name, printer) values(:id, :name, :printer)', 'select gen_id(cbr_gen, 1) as id from rdb$database', NULL, NULL, NULL, NULL, 0, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_KITCHEN', 'Item', 'select * from cbr_kitchens where id = :id', NULL, NULL, 'update cbr_kitchens set name = :name, printer = :printer where id = :id', NULL, NULL, NULL, 0, 'ID', 0, NULL, NULL);
INSERT INTO BFW_ENT_VIEWS (ENTITYNAME, VIEWNAME, SQL_SELECT, SQL_INSERT, SQL_INSERTDEF, SQL_UPDATE, SQL_DELETE, SQL_REFRESH, SQL_TITLE, READONLY, PKEY, IS_EXEC, TITLE, OPTIONS) VALUES ('CBR_KITCHEN', 'Lookup', 'select id, name from cbr_kitchens order by name', NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, NULL);

COMMIT WORK;

INSERT INTO BFW_SEC_POLICIES (POLID, NAME, PARENTID, STATE, USE_RES, RES_PROVID, RES_PARENT_SQL) VALUES ('APP.ACTIVITIES', 'Доступ к функциям программы', NULL, 1, 1, 'security.resprovider.app.activities', NULL);
INSERT INTO BFW_SEC_POLICIES (POLID, NAME, PARENTID, STATE, USE_RES, RES_PROVID, RES_PARENT_SQL) VALUES ('ADMIN', 'Административные разрешения', NULL, 1, 0, NULL, NULL);

COMMIT WORK;

INSERT INTO BFW_SEC_PERMISSIONS (PERMID, NAME, POLID, INHERITBY, INHERITBY_RES_SQL, DESCRIPTION) VALUES ('app.activity.execute', 'Выполнить', 'APP.ACTIVITIES', NULL, NULL, NULL);
INSERT INTO BFW_SEC_PERMISSIONS (PERMID, NAME, POLID, INHERITBY, INHERITBY_RES_SQL, DESCRIPTION) VALUES ('builtin.unrestricted', 'Неограниченный доступ', 'ADMIN', NULL, NULL, NULL);

COMMIT WORK;

INSERT INTO BFW_SEC_USERS (USERID, NAME, ISROLE) VALUES ('SYSDBA', 'Админ. БД', 0);

COMMIT WORK;

INSERT INTO BFW_SEC_ACL (PERMID, USERID, RESID, STATE) VALUES ('builtin.unrestricted', 'SYSDBA', '', 1);

COMMIT WORK;

INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.ENTITY.ItemDef', 'IEntityItemDef', '-', NULL, '-', NULL, 0, 'DefaultURI=views.%s.Item;EViewURI=ItemURI;EViewURIField=URI', 'ID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.ENTITY.DetailDef', 'IEntityItemDef', '-', NULL, '-', NULL, 0, 'DefaultURI=views.%s.Detail;EViewURI=DetailURI;EViewURIField=URI', 'ID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.ENTITY.NewDef', 'IEntityNewDef', '-', NULL, '-', NULL, 0, 'DefaultURI=views.%s.New', NULL, NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.ENTITY.DetailNewDef', 'IEntityNewDef', '-', '', '-', NULL, 0, 'DefaultURI=views.%s.DetailNew', 'HID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU.List', 'IEntityListView', 'CBR_MENU', 'List', 'Меню', 'Система', 1, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_PRICE_TYP.List', 'IEntityListView', 'CBR_PRICE_TYP', 'List', 'Типы цен', NULL, 0, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_WAITER_DESK.view', 'views.CBR_WAITER_DESK.view', '-', NULL, 'Заказы', 'Система', 5, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_PRICE_TYP.New', 'IEntityNewView', 'CBR_PRICE_TYP', 'New', 'Новый тип цены', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_PRICE_TYP.Item', 'IEntityItemView', 'CBR_PRICE_TYP', 'Item', 'Тип цены', NULL, 0, NULL, 'ID', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU.New', 'IEntityNewView', 'CBR_MENU', 'New', 'Новое блюдо', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORDER_DESK.Item', 'views.CBR_ORDER_DESK.Item', '-', NULL, 'Заказ', NULL, 0, NULL, 'ID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORDER_DESK.New', 'views.CBR_ORDER_DESK.New', '-', NULL, 'Новый заказ', NULL, 0, NULL, 'TBL_ID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_PRICE.List', 'IEntityListView', 'CBR_PRICE', 'List', 'Цены', 'Система', 2, 'UseSelector', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_PRICE.Selector', 'IEntitySelectorView', 'CBR_PRICE', 'Selector', 'Параметры', NULL, 0, NULL, 'DAT;TYP_ID', 'DAT;TYP_ID', 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU.Item', 'IEntityItemView', 'CBR_MENU', 'Item', 'Блюдо', NULL, 0, NULL, 'id', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_UI.MainMenu', 'IEntityDeskMenuView', 'CBR_UI', 'MainMenu', 'CaBaRe System', NULL, 0, '', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU_GRP.List', 'IEntityListView', 'CBR_MENU_GRP', 'List', 'Группы меню', NULL, 0, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU_GRP.New', 'IEntityNewView', 'CBR_MENU_GRP', 'New', 'Новая группа меню', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_MENU_GRP.Item', 'IEntityItemView', 'CBR_MENU_GRP', 'Item', 'Группа меню', NULL, 0, NULL, 'ID', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_TBL.List', 'IEntityListView', 'CBR_TBL', 'List', 'Столы', 'Система', 3, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_TBL.New', 'IEntityNewView', 'CBR_TBL', 'New', 'Новый стол', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ROOM.List', 'IEntityListView', 'CBR_ROOM', 'List', 'Список залов', NULL, 0, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ROOM.New', 'IEntityNewView', 'CBR_ROOM', 'New', 'Новый зал', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_TBL.Item', 'IEntityItemView', 'CBR_TBL', 'Item', 'Стол', NULL, 0, NULL, 'ID', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ROOM.Item', 'IEntityItemView', 'CBR_ROOM', 'Item', 'Зал', NULL, 0, NULL, 'id', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('activities.KORDER.Create', 'activities.KORDER.Create', '-', '-', '-', NULL, 0, NULL, 'ORD_ID', NULL, 0, '');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.UTL_JRN.Selector', 'IEntitySelectorView', 'UTL_JRN', 'Selector', 'Отбор', NULL, 0, '', 'DATE1;DATE2', 'DATE1;DATE2', 0, 'MISC');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Item', 'IEntityItemExtView', 'CBR_ORD', 'Head', 'Заказ', NULL, 0, 'DetailEViews=DetailItems,DetailKOrd', 'ID', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_ENT.List', 'IEntityListView', 'BFW_IDE_ENT', 'List', 'Entities', NULL, 0, 'CanEdit', NULL, NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_ENT.Item', 'IEntityItemView', 'BFW_IDE_ENT', 'Item', 'Entity', NULL, 0, NULL, 'ID', NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_EVIEW.List', 'IEntityListView', 'BFW_IDE_EVIEW', 'List', 'EViews', NULL, 0, 'CanEdit;Title=ListTitle', 'ENTITYNAME', NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_EVIEW.Item', 'IEntityItemView', 'BFW_IDE_EVIEW', 'Item', 'EView', NULL, 0, NULL, 'ENTITYNAME;VIEWNAME', NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_CLS.Item', 'IEntityItemView', 'BFW_IDE_UI_CLS', 'Item', 'UI Class Item', NULL, 0, NULL, 'ID', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI.List', 'IEntityListView', 'BFW_IDE_UI', 'List', 'UI List', NULL, 0, 'CanEdit;Title=ListTitle', 'PKG', NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI.New', 'IEntityNewView', 'BFW_IDE_UI', 'New', 'New UI', NULL, 0, 'Next=views.BFW_IDE_UI.Item', 'PKG', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI.Item', 'IEntityItemView', 'BFW_IDE_UI', 'Item', 'UI Item', NULL, 0, NULL, 'URI', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_FIELDS.List', 'IEntityListView', 'BFW_IDE_UI_FIELDS', 'List', 'Fields for UI', NULL, 0, 'CanEdit', 'ENTITYNAME;VIEWNAME', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE.Main', 'IEntityListView', 'BFW_IDE', 'Packages', 'IDE', 'Сервис', 0, 'CanOpen', NULL, NULL, 1, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_EVIEW.New', 'IEntityNewView', 'BFW_IDE_EVIEW', 'New', 'New EView', NULL, 0, NULL, 'ENTITYNAME', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_FIELDS.Item', 'IEntityItemView', 'BFW_IDE_UI_FIELDS', 'Item', 'Entity view field', NULL, 0, NULL, 'ENTITYNAME,VIEWNAME,FIELDNAME', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_FIELDS.New', 'IEntityNewView', 'BFW_IDE_UI_FIELDS', 'New', 'New field for UI', '', 0, 'Next', 'ENTITYNAME,VIEWNAME', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_ENT.New', 'IEntityNewView', 'BFW_IDE_ENT', 'New', 'New Entity', NULL, 0, NULL, NULL, NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_CMD.List', 'IEntityListView', 'BFW_IDE_UI_CMD', 'List', 'UI Commands', NULL, 0, 'CanEdit', 'URI', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_CMD.Item', 'IEntityItemView', 'BFW_IDE_UI_CMD', 'Item', 'Command', NULL, 0, NULL, 'URI;CMD', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.BFW_IDE_UI_CMD.New', 'IEntityNewView', 'BFW_IDE_UI_CMD', 'New', 'UI Command (New)', NULL, 0, NULL, 'URI', NULL, 0, 'BFW.IDE');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.List', 'IEntityListView', 'CBR_ORD', 'List', 'Журнал заказов', 'Система', 4, 'UseSelector', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Selector', 'IEntitySelectorView', 'CBR_ORD', 'Selector', 'Отбор', NULL, 0, NULL, 'DAT1;DAT2', 'DAT1;DAT2', 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Head', 'IEntityItemView', 'CBR_ORD', 'HeadEdit', 'Заказ', NULL, 0, 'CanEdit', 'ID', NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Oper.BackToActive', 'IEntityOperExec', 'CBR_ORD', 'BackToActive', 'Возврат на обслуживание', NULL, 0, 'confirm=Вернуть заказ на обслуживание?', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Item.URI', 'IEntityActivity', 'CBR_ORD', 'ItemURI', 'Заказ', NULL, 0, NULL, 'ID', 'ID', 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_KITCHEN.List', 'IEntityListView', 'CBR_KITCHEN', 'List', 'Кухни', '', 0, 'CanEdit', NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_ORD.Desk', 'views.CBR_ORD.Desk', 'CBR_ORD_DESK', NULL, 'Заказ', NULL, 0, NULL, 'ID', NULL, 0, NULL);
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_KITCHEN.New', 'IEntityNewView', 'CBR_KITCHEN', 'New', 'Новая кухня', NULL, 0, NULL, NULL, NULL, 0, 'CBR');
INSERT INTO BFW_UI (URI, CLS, ENTITYNAME, VIEWNAME, TITLE, GRP, MENUIDX, OPTIONS, PARAMS, OUTS, USEPERM, PKG) VALUES ('views.CBR_KITCHEN.Item', 'IEntityItemView', 'CBR_KITCHEN', 'Item', 'Кухня', NULL, 0, NULL, 'ID', NULL, 0, 'CBR');

COMMIT WORK;

INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityListView', 'List', '{Selector;SelectorInfo,NewURI,ItemURI}', NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityJournalView', 'Journal', 'States{Selector;SelectorInfo,NewURI,ItemURI}', NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityItemView', 'Item', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityNewView', 'New', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityComplexView', 'Head', 'Details{DetailNewURI,DetailItemURI}', NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityPickListView', 'PickList', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityOrgChartView', 'OrgChart', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntitySelectorView', 'Selector', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityItemExtView', 'ItemHead', 'ItemDetailEViews;ItemDetails', NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityActivity', '-', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityDeskView', 'Desk', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityCollectView', '-', 'CollectInfo;CollectList;CollectItems', NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityDeskMenuView', 'Items', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityTreeListView', 'List', NULL, NULL);
INSERT INTO BFW_UI_CLS (CLS, VIEWNAME, DESCRIPTION, OPTIONS) VALUES ('IEntityOperExec', '-', NULL, NULL);

COMMIT WORK;

INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityListView', 'commands.view.open', 'Открыть', 0, NULL, 0, 'views.ENTITY.ItemDef', NULL, 'ID=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityTreeListView', 'commands.view.open', 'Открыть', 0, NULL, 0, 'views.ENTITY.ItemDef', NULL, 'ID=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityJournalView', 'commands.view.open', 'Открыть', 0, NULL, 0, 'views.ENTITY.ItemDef', NULL, 'ID=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityCollectView', 'commands.view.open', 'Открыть', 0, NULL, 0, 'views.ENTITY.DetailDef', NULL, 'ID=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityComplexView', 'commands.view.detail.open', 'Открыть запись', 0, NULL, 0, 'views.ENTITY.DetailDef', NULL, 'ID=DETAIL_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityListView', 'commands.view.new', 'Добавить', 0, NULL, 0, 'views.ENTITY.NewDef', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityTreeListView', 'commands.view.new', 'Добавить', 0, NULL, 0, 'views.ENTITY.NewDef', NULL, 'PARENT_ID=EV.PARENT_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('IEntityJournalView', 'commands.view.new', 'Добавить', 0, NULL, 0, 'views.ENTITY.NewDef', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_ENT.List', 'cmd.EView', 'Views', 0, NULL, 0, 'views.BFW_IDE_EVIEW.List', NULL, 'ENTITYNAME=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI_CMD.List', 'commands.view.open', 'Open', 0, NULL, 0, 'views.BFW_IDE_UI_CMD.Item', NULL, 'URI=URI;CMD=EV.CMD', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_EVIEW.List', 'commands.view.new', 'New', 0, NULL, 0, 'views.BFW_IDE_EVIEW.New', NULL, 'ENTITYNAME=ENTITYNAME', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI.Item', 'cmd.fields', 'Fields', 2, NULL, 0, 'views.BFW_IDE_UI_FIELDS.List', NULL, 'ENTITYNAME=ENT;VIEWNAME=ENT_VIEW', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI.Item', 'cmd.commands', 'Commands', 1, NULL, 0, 'views.BFW_IDE_UI_CMD.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI_CMD.List', 'commands.view.new', 'Add', 0, NULL, 0, 'views.BFW_IDE_UI_CMD.New', NULL, 'URI=URI', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_EVIEW.List', 'commands.view.open', 'Open', 0, NULL, 0, 'views.BFW_IDE_EVIEW.Item', NULL, 'ENTITYNAME=EV.ENTITYNAME;VIEWNAME=EV.VIEWNAME', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI_FIELDS.List', 'commands.view.open', 'Open', 0, NULL, 0, 'views.BFW_IDE_UI_FIELDS.Item', NULL, 'ENTITYNAME=EV.ENTITYNAME;VIEWNAME=EV.VIEWNAME;FIELDNAME=EV.FIELDNAME', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE.Main', 'commands.view.open', 'Open', 0, NULL, 0, 'views.BFW_IDE_UI.List', NULL, 'PKG=ITEM_ID', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI.List', 'commands.view.open', 'Open', 0, NULL, 0, 'views.BFW_IDE_UI.Item', NULL, 'URI=EV.URI', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI_FIELDS.List', 'commands.view.new', 'Add', 0, NULL, 0, 'views.BFW_IDE_UI_FIELDS.New', NULL, 'ENTITYNAME=ENTITYNAME;VIEWNAME=VIEWNAME', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE.Main', 'cmd.Entities', 'Entities', 0, NULL, 0, 'views.BFW_IDE_ENT.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI.Item', 'cmd.entityviews', 'Entity Views', 3, NULL, 0, 'views.BFW_IDE_EVIEW.List', NULL, 'ENTITYNAME=ENT', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_UI.List', 'commands.view.new', 'Добавить', 0, NULL, 0, 'views.BFW_IDE_UI.New', NULL, 'PKG=PKG', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_PRICE.List', 'cmd.PriceTypList', 'Типы цен', 0, NULL, 0, 'views.CBR_PRICE_TYP.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_MENU.List', 'cmd.Groups', 'Группы', 0, NULL, 0, 'views.CBR_MENU_GRP.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_TBL.List', 'cmd.Rooms', 'Список залов', 0, NULL, 0, 'views.CBR_ROOM.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.BFW_IDE_EVIEW.Item', 'cmd.Fields', 'Fields', 0, NULL, 0, 'views.BFW_IDE_UI_FIELDS.List', NULL, 'ENTITYNAME=ENTITYNAME;VIEWNAME=VIEWNAME', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_ORD.List', 'cmd.open', 'Открыть', 0, NULL, 0, 'views.CBR_ORD.Item', 'on.dblclick', 'id=item_id', NULL, NULL, NULL, 'item_id=NotEmpty', NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_ORD.Item', 'cmd.Print.KOrder', 'Бегунок', 10, '', 0, 'reports.korder', NULL, 'ID=EV.DetailKOrd.ID;LaunchMode=[1]', NULL, NULL, NULL, 'EV.DetailKOrd.ID=NotEmpty;ACTIVE_DETAIL=[DetailKOrd]', NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_ORD.Item', 'cmd.Print.PreCheck', 'Пречек', 20, '', 0, 'reports.precheck', '', 'ID=HID;LaunchMode=[1]', NULL, NULL, NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_ORD.Item', 'cmd.BackToActive', 'Вернуть на обслуживание', 0, NULL, 0, 'views.CBR_ORD.Oper.BackToActive', NULL, 'ID=HID', NULL, 'CloseViewAfter', NULL, NULL, NULL);
INSERT INTO BFW_UI_CMD (URI, CMD, CAPTION, IDX, GRP, DEF, HANDLER, HANDLER_FOR, PARAMS, OUTS, OPTIONS, CONDITION, CONDITION_PARAMS, SHORTCUT) VALUES ('views.CBR_TBL.List', 'cmd.Kitchens', 'Кухни', 20, NULL, 0, 'views.CBR_KITCHEN.List', NULL, NULL, NULL, NULL, NULL, NULL, NULL);

COMMIT WORK;

INSERT INTO BFW_UI_STYLES (ID, OPTIONS) VALUES ('Style.InfoBk', 'Color=InfoBk');
INSERT INTO BFW_UI_STYLES (ID, OPTIONS) VALUES ('Style.Bold', 'Font.Style=Bold');

COMMIT WORK;

INSERT INTO CBR_KITCHENS (ID, NAME, PRINTER) VALUES (206, 'Основная', NULL);
INSERT INTO CBR_KITCHENS (ID, NAME, PRINTER) VALUES (208, 'Пицерия', NULL);

COMMIT WORK;

INSERT INTO CBR_PRICE_TYP (ID, NAME) VALUES (11, 'Базовый');

COMMIT WORK;

INSERT INTO CBR_ROOMS (ID, NAME) VALUES (3, 'ЗАЛ');
INSERT INTO CBR_ROOMS (ID, NAME) VALUES (166, 'Улица');

COMMIT WORK;

INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (5, 'СТОЛ  1', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (7, 'СТОЛ  2', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (9, 'СТОЛ  3', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (41, 'СТОЛ  4', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (43, 'СТОЛ  5', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (45, 'СТОЛ  6', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (47, 'СТОЛ  7', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (49, 'СТОЛ  8', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (51, 'СТОЛ  9', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (53, 'СТОЛ 10', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (55, 'СТОЛ 11', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (57, 'СТОЛ 12', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (59, 'СТОЛ 13', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (81, 'СТОЛ 14', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (154, 'СТОЛ 15', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (156, 'СТОЛ 16', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (158, 'СТОЛ 17', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (160, 'СТОЛ 18', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (162, 'СТОЛ 19', 3, 1);
INSERT INTO CBR_TBL (ID, NAME, ROOM_ID, STATE_ID) VALUES (164, 'СТОЛ 20', 3, 1);

COMMIT WORK;

INSERT INTO CBR_ORD (ID, DAT, STATE_ID, IUSR, IDAT, PUSR, PDAT, TBL_ID, PRICE_TYP_ID, LAST_ACT_TIME, PAYT_SUMM, PAYT_TIME) VALUES (707, '2012-09-25', 2, 'SYSDBA', '2012-09-25 14:46:15', NULL, NULL, 5, 11, '2012-09-25 14:46:15', NULL, NULL);
INSERT INTO CBR_ORD (ID, DAT, STATE_ID, IUSR, IDAT, PUSR, PDAT, TBL_ID, PRICE_TYP_ID, LAST_ACT_TIME, PAYT_SUMM, PAYT_TIME) VALUES (721, '2012-09-25', 2, 'SYSDBA', '2012-09-25 14:58:48', NULL, NULL, 7, 11, '2012-09-25 14:58:48', NULL, NULL);

COMMIT WORK;

INSERT INTO CBR_KORD (ID, DAT, IDAT, ORD_ID, KITCHEN_ID) VALUES (714, '2012-09-25', '2012-09-25 14:47:14', 707, NULL);
INSERT INTO CBR_KORD (ID, DAT, IDAT, ORD_ID, KITCHEN_ID) VALUES (726, '2012-09-25', '2012-09-25 14:59:12', 721, NULL);

COMMIT WORK;

INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (715, 714, 708);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (716, 714, 709);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (717, 714, 710);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (718, 714, 711);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (719, 714, 712);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (720, 714, 713);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (727, 726, 722);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (728, 726, 723);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (729, 726, 724);
INSERT INTO CBR_KORDI (ID, HID, ORDI_ID) VALUES (730, 726, 725);

COMMIT WORK;

INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (13, 'ПЕПСИ', NULL, 0, 9);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (15, 'КОФЕ', NULL, 0, 7);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (35, 'ПИЦЦА', 125, 0, 3);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (73, 'ХОЛ  НАПИТКИ', NULL, 0, 11);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (8, 'ЧАЙ', NULL, 0, 8);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (10, 'ПРОСТАЯ  ВОДА', NULL, 0, 10);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (12, 'БЛЮДА ОСНОВНЫЕ', NULL, 0, 1);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (14, 'БЛЮДА  ОСНОВ./ЛАВАШ', NULL, 0, 2);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (16, 'СУПЫ', NULL, 0, 5);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (18, 'САЛАТЫ', NULL, 0, 4);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (20, 'ДОБАВКИ ', NULL, 0, 99);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (22, 'СЛАДОСТИ', NULL, 0, 6);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (125, 'доп Пицца', NULL, 1, 99);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (129, 'доп  Гамбург.', NULL, 1, 99);
INSERT INTO CBR_MENU_GRP (ID, NAME, ADDON_GRP_ID, IS_ADDON, IDX) VALUES (182, 'доп Сендвич.', NULL, 1, 99);

COMMIT WORK;

INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (17, 'Пепси х0,5.', 13, 1, '0,5л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (18, 'Пепси х0,33л. банка', 13, 1, '0.33л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (19, 'Пепси х1л.', 13, 1, '1л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (20, 'Пепси х1,5л.', 13, 1, '1,5л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (21, 'Пепси х0,33л. cтекло', 13, 1, '0,33л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (1, 'Кофе эспрессо', 15, 1, 'ч', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (37, 'Пицца  - 22см. баран', 35, 1, 'пор.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (40, 'Бон-Аква х1л.', 10, 1, '1л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (2, 'Кофе америк.', 15, 1, 'ч', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (3, 'Кофе с молоком', 15, 1, 'ч', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (4, 'Айран x0,5л', 73, 1, '0,5л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (5, ' Айран х0,33л', 73, 1, '0,33л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (61, 'Бон-Аква х0,5л', 10, 1, '0.5', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (64, 'Бон-Аква х2л.', 10, 1, '2л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (65, 'Соус остр.', 20, 1, '3гр.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (67, 'Пицца  - 30см.баран', 35, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (68, 'Coca-cola 0.5л', 13, 1, '0.5л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (69, 'Coca-cola 1.5л.', 13, 1, '1.5л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (70, 'Coca-cola 0.25л', 13, 1, '0.25л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (71, 'Coca-cola   2л.', 13, 1, '2л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (72, 'Coca-cola 1л.', 13, 1, '1л.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (78, 'Чай  хол, лип. 0.5л', 8, 1, 'б', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (30, 'Соус чес.', 20, 1, '3гр.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (79, 'Чай гар. чер. ст.', 8, 1, 'ст.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (77, 'Чай хол, нес. ст.', 8, 1, 'б', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (80, 'Чай гар. зел.ст.', 8, 1, 'ст.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (83, 'Хомус', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (84, 'Фуль пор.', 12, 1, 'пор.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (85, 'Фалафель', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (86, 'Берн енер.0.5л', 73, 1, '0.5л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (87, 'Берн енер.0.33л', 73, 1, '0.33л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (95, 'Филе ,Дельфия,', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (96, 'Куфта баранина', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (90, 'Карт.фри', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (91, 'филе пингас.', 12, 1, 'пор.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (92, 'зап.семга с картофелем', 12, 1, 'пор.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (97, 'Кебаб пор', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (98, 'Шиштаук', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (99, 'хомус с фалаф.4котл.', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (100, 'фалафель 1шт.', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (101, 'фалафель в лав.', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (102, 'шаурма', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (103, 'гамбургер', 12, 1, 'бул', NULL, 129, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (104, 'кебаб кур.', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (105, 'перень кур.', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (106, 'сулугуни', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (107, 'чисбургер ', 12, 1, 'бул', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (108, 'суп из чечев.', 16, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (109, 'куриный', 16, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (110, 'грибной', 16, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (111, 'овощной салат', 18, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (112, 'фаттуш', 18, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (113, 'лабан с огурцами', 18, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (114, 'кунафа 1шт', 22, 1, 'шт', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (115, 'кунафа 0,5кг.', 22, 1, '0,5кг', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (116, 'кутаеф 1шт', 22, 1, 'шт', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (117, 'мутабель', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (118, 'лаваш 1шт', 20, 1, 'шт.', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (119, 'лаваш 7шт', 20, 1, '7шт', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (120, 'масло оливк.', 20, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (121, 'сервис  овощной', 18, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (122, 'пельмени', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (131, 'сыр', 129, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (132, 'яйцо', 129, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (133, 'пер. бол.', 182, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (134, 'перец бол.', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (135, 'грибы', 182, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (136, 'помидоры', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (137, '2-е мясо', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (139, '2-е мясо', 182, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (140, 'грибы', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (141, 'сыр', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (142, 'сыр', 182, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (149, 'гамбургер в лав', 14, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (150, 'кебаб кур.', 12, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (170, 'Пицца  - 22см. курин', 35, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (173, 'Пицца  - 30см.кур', 35, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (175, 'Пицца без мяса', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (176, 'Пицца  без грибов', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (177, 'Пицца без бол.пер.', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (178, 'Пицца без сыра', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (179, 'Пицца без помидор', 125, 1, 'п', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (184, 'с острым ', 182, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (185, 'без помидор', 182, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (186, 'без капусты', 182, 1, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (187, 'с сыром', 182, 3, 'л', NULL, NULL, NULL);
INSERT INTO CBR_MENU (ID, NAME, GRP_ID, STATE_ID, UNT, IDX, ADDON_GRP_ID, KITCHEN_ID) VALUES (188, 'без картошки', 182, 1, 'л', NULL, NULL, NULL);

COMMIT WORK;

INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (708, 707, 107, 1, 12, 714, NULL);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (709, 707, 103, 1, 10, 714, NULL);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (710, 707, 132, 1, 3, 714, 709);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (711, 707, 67, 1, 30, 714, NULL);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (712, 707, 141, 1, 8, 714, 711);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (713, 707, 175, 1, 0, 714, 711);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (722, 721, 103, 1, 10, 726, NULL);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (723, 721, 132, 1, 3, 726, 722);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (724, 721, 170, 1, 18, 726, NULL);
INSERT INTO CBR_ORDI (ID, HID, MENU_ID, QTY, PRICE, KORD_ID, PARENT_ID) VALUES (725, 721, 134, 1, 3, 726, 724);

COMMIT WORK;

INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (9, 17, 11, '2012-09-06', 9);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (3, 1, 11, '2012-09-10', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (4, 18, 11, '2012-09-10', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (5, 21, 11, '2012-09-10', 7);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (6, 19, 11, '2012-09-10', 13);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (7, 20, 11, '2012-09-10', 14);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (8, 3, 11, '2012-09-10', 8);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (10, 2, 11, '2012-09-10', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (11, 4, 11, '2012-09-10', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (12, 5, 11, '2012-09-10', 6);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (105, 30, 11, '2012-09-16', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (197, 30, 11, '2012-09-17', 3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (198, 37, 11, '2012-09-17', 18);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (219, 40, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (266, 87, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (233, 61, 11, '2012-09-17', 6);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (234, 64, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (235, 65, 11, '2012-09-17', 3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (236, 2, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (237, 3, 11, '2012-09-17', 8);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (238, 1, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (239, 5, 11, '2012-09-17', 6);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (240, 4, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (241, 80, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (242, 79, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (243, 78, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (244, 77, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (245, 71, 11, '2012-09-17', 16);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (246, 70, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (247, 68, 11, '2012-09-17', 9);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (248, 69, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (249, 72, 11, '2012-09-17', 13);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (250, 18, 11, '2012-09-17', 7);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (251, 21, 11, '2012-09-17', 7);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (252, 17, 11, '2012-09-17', 9);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (253, 20, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (254, 19, 11, '2012-09-17', 13);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (267, 86, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (255, 67, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (268, 118, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (269, 119, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (270, 120, 11, '2012-09-17', 5);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (271, 90, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (272, 97, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (273, 96, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (274, 98, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (275, 99, 11, '2012-09-17', 25);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (276, 85, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (277, 95, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (278, 84, 11, '2012-09-17', 25);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (279, 83, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (280, 92, 11, '2012-09-17', 50);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (281, 117, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (282, 100, 11, '2012-09-17', 1.3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (283, 91, 11, '2012-09-17', 40);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (284, 101, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (285, 102, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (286, 107, 11, '2012-09-17', 12);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (287, 103, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (288, 106, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (289, 105, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (290, 104, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (302, 139, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (303, 135, 11, '2012-09-17', 3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (292, 110, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (293, 109, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (304, 133, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (294, 108, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (295, 116, 11, '2012-09-17', 7);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (296, 115, 11, '2012-09-17', 40);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (297, 114, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (298, 112, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (299, 111, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (300, 113, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (301, 121, 11, '2012-09-17', 10);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (305, 142, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (306, 137, 11, '2012-09-17', 6);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (307, 140, 11, '2012-09-17', 4);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (308, 136, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (309, 141, 11, '2012-09-17', 8);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (310, 131, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (311, 132, 11, '2012-09-17', 3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (312, 134, 11, '2012-09-17', 3);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (314, 149, 11, '2012-09-17', 15);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (313, 122, 11, '2012-09-17', 20);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (315, 150, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (324, 170, 11, '2012-09-17', 18);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (325, 173, 11, '2012-09-17', 30);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (354, 175, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (364, 176, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (365, 177, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (366, 179, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (367, 178, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (410, 186, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (411, 185, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (412, 184, 11, '2012-09-17', 0);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (450, 187, 11, '2012-09-17', 2);
INSERT INTO CBR_PRICE (ID, MENU_ID, TYP_ID, DAT, PRICE) VALUES (451, 188, 11, '2012-09-17', 0);

COMMIT WORK;

INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_MENU', 'STATE_ID', 0, 'Новое', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_MENU', 'STATE_ID', 1, 'Активно', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_MENU', 'STATE_ID', 2, 'Не активно', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_MENU', 'STATE_ID', 3, 'Закрыто', '');
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_ORD', 'STATE_ID', 1, 'Обслуживается', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_ORD', 'STATE_ID', 2, 'Пречек', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_ORD', 'STATE_ID', 3, 'Закрыт', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR_ORD', 'STATE_ID', 0, 'Открыт', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR', '-', 0, 'Новая', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR', '-', 1, 'Активная', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR', '-', 2, 'Не активная', NULL);
INSERT INTO INF_ENUM (TABLENAME, FIELDNAME, ID, NAME, CODE) VALUES ('CBR', '-', 3, 'Закрытая', NULL);

COMMIT WORK;

INSERT INTO INF_MSG (CODE, MSG) VALUES ('ERROR.PRECHECK', 'Есть невыполненный заказ!');
INSERT INTO INF_MSG (CODE, MSG) VALUES ('CBR_ORD.DELETE.CHK_STATE', 'Удалять нельзя! Заказ в работе');
INSERT INTO INF_MSG (CODE, MSG) VALUES ('CBR_ORD.DELETE.NOT_EMPTY', 'Удалять нельзя! Заказ не пуст');

COMMIT WORK;

INSERT INTO INF_STATES (TABLENAME, ID, CODE, NAME, DRANGE) VALUES ('CBR_ORD', 0, NULL, 'Открытые', 0);
INSERT INTO INF_STATES (TABLENAME, ID, CODE, NAME, DRANGE) VALUES ('CBR_ORD', 1, NULL, 'Обслуживаются', 0);
INSERT INTO INF_STATES (TABLENAME, ID, CODE, NAME, DRANGE) VALUES ('CBR_ORD', 2, NULL, 'Пречек', 0);
INSERT INTO INF_STATES (TABLENAME, ID, CODE, NAME, DRANGE) VALUES ('CBR_ORD', 3, NULL, 'Закрытые', 1);

COMMIT WORK;



/******************************************************************************/
/***                           Unique Constraints                           ***/
/******************************************************************************/

ALTER TABLE BFW_ENT_VIEW_LINKS ADD CONSTRAINT UNQ1_BFW_ENT_VIEW_LINKS UNIQUE (ENTITYNAME, VIEWNAME, LINKED_ENTITYNAME, LINKED_VIEWNAME, LINKED_FIELD);
ALTER TABLE CBR_PRICE ADD CONSTRAINT UNQ1_CBR_PRICE UNIQUE (MENU_ID, TYP_ID, DAT);


/******************************************************************************/
/***                              Primary Keys                              ***/
/******************************************************************************/

ALTER TABLE BFW_ENT ADD CONSTRAINT PK_BFW_ENT PRIMARY KEY (ENTITYNAME);
ALTER TABLE BFW_ENT_FIELDS ADD CONSTRAINT PK_BFW_ENT_FIELDS PRIMARY KEY (ENTITYNAME, VIEWNAME, FIELDNAME);
ALTER TABLE BFW_ENT_VIEWS ADD CONSTRAINT PK_BFW_ENT_VIEWS PRIMARY KEY (ENTITYNAME, VIEWNAME);
ALTER TABLE BFW_INF_MSG ADD CONSTRAINT PK_BFW_INF_MSG PRIMARY KEY (ID);
ALTER TABLE BFW_SEC_ACL ADD CONSTRAINT PK_BFW_SEC_ACL PRIMARY KEY (PERMID, USERID, RESID);
ALTER TABLE BFW_SEC_PERMISSIONS ADD CONSTRAINT PK_BFW_SEC_PERMISSIONS PRIMARY KEY (PERMID);
ALTER TABLE BFW_SEC_POLICIES ADD CONSTRAINT PK_BFW_SEC_POLICIES PRIMARY KEY (POLID);
ALTER TABLE BFW_SEC_PROV ADD CONSTRAINT PK_BFW_SEC_PROV PRIMARY KEY (URI);
ALTER TABLE BFW_SEC_USERS ADD CONSTRAINT PK_BFW_SEC_USERS PRIMARY KEY (USERID);
ALTER TABLE BFW_SEC_USER_ROLES ADD CONSTRAINT PK_BFW_SEC_USER_ROLES PRIMARY KEY (USERID, ROLEID);
ALTER TABLE BFW_UI ADD CONSTRAINT PK_BFW_UI PRIMARY KEY (URI);
ALTER TABLE BFW_UI_CLS ADD CONSTRAINT PK_BFW_UI_CLS PRIMARY KEY (CLS);
ALTER TABLE BFW_UI_CMD ADD CONSTRAINT PK_BFW_UI_CMD PRIMARY KEY (URI, CMD);
ALTER TABLE BFW_UI_GRP ADD CONSTRAINT PK_BFW_UI_GRP PRIMARY KEY (GRP);
ALTER TABLE BFW_UI_STYLES ADD CONSTRAINT PK_BFW_UI_STYLES PRIMARY KEY (ID);
ALTER TABLE CBR_KITCHENS ADD CONSTRAINT PK_CBR_KITCHENS PRIMARY KEY (ID);
ALTER TABLE CBR_KORD ADD CONSTRAINT PK_CBR_KORD PRIMARY KEY (ID);
ALTER TABLE CBR_KORDI ADD CONSTRAINT PK_CBR_KORDI PRIMARY KEY (ID);
ALTER TABLE CBR_MENU ADD CONSTRAINT PK_CBR_MENU PRIMARY KEY (ID);
ALTER TABLE CBR_MENU_GRP ADD CONSTRAINT PK_CBR_MENU_GRP PRIMARY KEY (ID);
ALTER TABLE CBR_ORD ADD CONSTRAINT PK_CBR_ORD PRIMARY KEY (ID);
ALTER TABLE CBR_ORDI ADD CONSTRAINT PK_CBR_ORDI PRIMARY KEY (ID);
ALTER TABLE CBR_PRICE ADD CONSTRAINT PK_CBR_PRICE PRIMARY KEY (ID);
ALTER TABLE CBR_PRICE_TYP ADD CONSTRAINT PK_CBR_PRICE_TYP PRIMARY KEY (ID);
ALTER TABLE CBR_ROOMS ADD CONSTRAINT PK_CBR_ROOMS PRIMARY KEY (ID);
ALTER TABLE CBR_TBL ADD CONSTRAINT PK_CBR_TBL PRIMARY KEY (ID);
ALTER TABLE INF_ENUM ADD CONSTRAINT PK_INF_ENUM PRIMARY KEY (TABLENAME, FIELDNAME, ID);
ALTER TABLE INF_MSG ADD CONSTRAINT PK_INF_MSG PRIMARY KEY (CODE);
ALTER TABLE INF_STATES ADD CONSTRAINT PK_INF_STATES PRIMARY KEY (TABLENAME, ID);


/******************************************************************************/
/***                              Foreign Keys                              ***/
/******************************************************************************/

ALTER TABLE BFW_SEC_ACL ADD CONSTRAINT FK_BFW_SEC_ACL_PERM FOREIGN KEY (PERMID) REFERENCES BFW_SEC_PERMISSIONS (PERMID);
ALTER TABLE BFW_SEC_ACL ADD CONSTRAINT FK_BFW_SEC_ACL_USERID FOREIGN KEY (USERID) REFERENCES BFW_SEC_USERS (USERID);
ALTER TABLE BFW_SEC_PERMISSIONS ADD CONSTRAINT FK_BFW_SEC_PERMISSIONS_INHERITB FOREIGN KEY (INHERITBY) REFERENCES BFW_SEC_PERMISSIONS (PERMID);
ALTER TABLE BFW_SEC_PERMISSIONS ADD CONSTRAINT FK_BFW_SEC_PERMISSIONS_POLID FOREIGN KEY (POLID) REFERENCES BFW_SEC_POLICIES (POLID);
ALTER TABLE BFW_SEC_POLICIES ADD CONSTRAINT FK_BFW_SEC_POLICIES_PARENT FOREIGN KEY (PARENTID) REFERENCES BFW_SEC_POLICIES (POLID);
ALTER TABLE BFW_SEC_USER_ROLES ADD CONSTRAINT FK_BFW_SEC_USER_ROLES_ROLEID FOREIGN KEY (ROLEID) REFERENCES BFW_SEC_USERS (USERID);
ALTER TABLE BFW_SEC_USER_ROLES ADD CONSTRAINT FK_BFW_SEC_USER_ROLES_USERID FOREIGN KEY (USERID) REFERENCES BFW_SEC_USERS (USERID);
ALTER TABLE CBR_KORD ADD CONSTRAINT FK_CBR_KORD_KITCHEN FOREIGN KEY (KITCHEN_ID) REFERENCES CBR_KITCHENS (ID);
ALTER TABLE CBR_KORD ADD CONSTRAINT FK_CBR_KORD_ORD FOREIGN KEY (ORD_ID) REFERENCES CBR_ORD (ID);
ALTER TABLE CBR_KORDI ADD CONSTRAINT FK_CBR_KORDI_HID FOREIGN KEY (HID) REFERENCES CBR_KORD (ID);
ALTER TABLE CBR_MENU ADD CONSTRAINT FK_CBR_MENU_ADDON_GRP FOREIGN KEY (ADDON_GRP_ID) REFERENCES CBR_MENU_GRP (ID);
ALTER TABLE CBR_MENU ADD CONSTRAINT FK_CBR_MENU_GRP FOREIGN KEY (GRP_ID) REFERENCES CBR_MENU_GRP (ID);
ALTER TABLE CBR_MENU ADD CONSTRAINT FK_CBR_MENU_KITCHEN FOREIGN KEY (KITCHEN_ID) REFERENCES CBR_KITCHENS (ID);
ALTER TABLE CBR_MENU_GRP ADD CONSTRAINT FK_CBR_MENU_GRP_ADDON FOREIGN KEY (ADDON_GRP_ID) REFERENCES CBR_MENU_GRP (ID);
ALTER TABLE CBR_ORD ADD CONSTRAINT FK_CBR_ORD_PRICE_TYP FOREIGN KEY (PRICE_TYP_ID) REFERENCES CBR_PRICE_TYP (ID);
ALTER TABLE CBR_ORD ADD CONSTRAINT FK_CBR_ORD_TBL FOREIGN KEY (TBL_ID) REFERENCES CBR_TBL (ID);
ALTER TABLE CBR_ORDI ADD CONSTRAINT FK_CBR_ORDI_HID FOREIGN KEY (HID) REFERENCES CBR_ORD (ID);
ALTER TABLE CBR_PRICE ADD CONSTRAINT FK_CBR_PRICE_MENU FOREIGN KEY (MENU_ID) REFERENCES CBR_MENU (ID);
ALTER TABLE CBR_PRICE ADD CONSTRAINT FK_CBR_PRICE_TYP FOREIGN KEY (TYP_ID) REFERENCES CBR_PRICE_TYP (ID);
ALTER TABLE CBR_TBL ADD CONSTRAINT FK_CBR_TBL_ROOM FOREIGN KEY (ROOM_ID) REFERENCES CBR_ROOMS (ID);


/******************************************************************************/
/***                                Indices                                 ***/
/******************************************************************************/

CREATE INDEX CBR_KORD_IDX_DAT ON CBR_KORD (DAT);
CREATE INDEX CBR_ORD_IDX_DAT ON CBR_ORD (DAT);
CREATE INDEX CBR_ORD_IDX_STATE ON CBR_ORD (STATE_ID);


/******************************************************************************/
/***                                Triggers                                ***/
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/***                          Triggers for tables                           ***/
/******************************************************************************/



/* Trigger: BFW_INF_MSG_BU */
CREATE TRIGGER BFW_INF_MSG_BU FOR BFW_INF_MSG
ACTIVE BEFORE UPDATE POSITION 0
as
begin
  if (new.status <> old.status and old.status = 0) then
    new.rdat = 'NOW';
end
^


/* Trigger: BFW_SEC_PERMISSIONS_BD */
CREATE TRIGGER BFW_SEC_PERMISSIONS_BD FOR BFW_SEC_PERMISSIONS
ACTIVE BEFORE DELETE POSITION 0
as
begin
  delete from bfw_sec_acl a where a.permid = old.permid;
end
^


/* Trigger: BFW_SEC_POLICIES_BD */
CREATE TRIGGER BFW_SEC_POLICIES_BD FOR BFW_SEC_POLICIES
ACTIVE BEFORE DELETE POSITION 0
as
begin
  if (old.polid = 'BUILD-IN') then
    exception bfw_sec_raise 'It is not allowed for built-in policy';
end
^


/* Trigger: BFW_SEC_POLICIES_BU */
CREATE TRIGGER BFW_SEC_POLICIES_BU FOR BFW_SEC_POLICIES
ACTIVE BEFORE UPDATE POSITION 0
as
begin
  if (new.polid = 'BUILT-IN' and new.state <> old.state and new.state = 0) then
    exception bfw_sec_raise 'It is not allowed for built-in policy';
end
^


/* Trigger: BFW_SEC_USERS_BD */
CREATE TRIGGER BFW_SEC_USERS_BD FOR BFW_SEC_USERS
ACTIVE BEFORE DELETE POSITION 0
as
begin
  delete from bfw_sec_acl a where a.userid = old.userid;
  delete from bfw_sec_user_roles r where r.userid = old.userid;
  delete from bfw_sec_user_roles r where r.roleid = old.userid;
end
^


/* Trigger: BFW_SEC_USERS_BI */
CREATE TRIGGER BFW_SEC_USERS_BI FOR BFW_SEC_USERS
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.name is null) then
    new.name = new.userid;
end
^


/* Trigger: BFW_SEC_USERS_BU */
CREATE TRIGGER BFW_SEC_USERS_BU FOR BFW_SEC_USERS
ACTIVE BEFORE UPDATE POSITION 0
as
begin
  if (new.name is null) then
    new.name = new.userid;
end
^


SET TERM ; ^



/******************************************************************************/
/***                           Stored Procedures                            ***/
/******************************************************************************/


SET TERM ^ ;

ALTER PROCEDURE BFW_IDE_EV_UI_ITEM (
    URI_ VARCHAR(50))
RETURNS (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    GRP VARCHAR(50),
    MENUIDX INTEGER,
    OPTIONS VARCHAR(1024),
    PARAMS VARCHAR(1024),
    OUTS VARCHAR(1024),
    USEPERM INTEGER,
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50),
    ENT_EVIEW VARCHAR(100),
    ENT_VIEW_READONLY INTEGER,
    ENT_VIEW_PKEY VARCHAR(50),
    ENT_SQL_SELECT VARCHAR(1024),
    ENT_SQL_INSERT VARCHAR(1024),
    ENT_SQL_INSERTDEF VARCHAR(1024),
    ENT_SQL_UPDATE VARCHAR(1024),
    ENT_SQL_DELETE VARCHAR(1024),
    ENT_SQL_REFRESH VARCHAR(1024),
    ENT_SQL_TITLE VARCHAR(1024),
    UI_TITLE VARCHAR(250))
AS
begin
  select ui.uri, ui.cls, ui.title, ui.grp, ui.menuidx, ui.options,
         ui.params, ui.outs, ui.useperm, ui.pkg,
         ui.entityname, coalesce(ui.viewname, cls.viewname),
         ev.sql_select, ev.sql_insert, ev.sql_update, ev.sql_delete,
         ev.sql_refresh, ev.sql_insertdef, ev.sql_title,
         ev.readonly, ev.pkey
  from bfw_ui ui
       left join bfw_ui_cls cls on (cls.cls = ui.cls)
       left join bfw_ent_views ev on (ev.entityname = ui.entityname and ev.viewname = coalesce(ui.viewname, cls.viewname))
  where ui.uri = :uri_
  into :uri, :cls, :title, :grp, :menuidx, :options,
       :params, :outs, :useperm, :pkg,
       :ent, :ent_view,
       :ent_sql_select, :ent_sql_insert, :ent_sql_update, :ent_sql_delete,
       :ent_sql_refresh, :ent_sql_insertdef, :ent_sql_title,
       :ent_view_readonly, :ent_view_pkey;

  ENT_EVIEW = ent || '.' || coalesce(:ent_view, '');

  UI_TITLE = 'UI: ' || title;

  suspend;
end^


ALTER PROCEDURE BFW_IDE_EV_UI_ITEM_U (
    URI VARCHAR(50),
    TITLE VARCHAR(50),
    GRP VARCHAR(50),
    MENUIDX INTEGER,
    OPTIONS VARCHAR(1024),
    PARAMS VARCHAR(1024),
    OUTS VARCHAR(1024),
    USEPERM INTEGER,
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50),
    ENT_VIEW_READONLY INTEGER,
    ENT_VIEW_PKEY VARCHAR(50),
    ENT_SQL_SELECT VARCHAR(1024),
    ENT_SQL_INSERT VARCHAR(1024),
    ENT_SQL_INSERTDEF VARCHAR(1024),
    ENT_SQL_UPDATE VARCHAR(1024),
    ENT_SQL_DELETE VARCHAR(1024),
    ENT_SQL_REFRESH VARCHAR(1024),
    ENT_SQL_TITLE VARCHAR(1024))
AS
begin
  update bfw_ui
  set title = :title,
      grp = :grp,
      menuidx = :menuidx,
      options = :options,
      params = :params,
      outs = :outs,
      useperm = :useperm,
      pkg = :pkg
  where uri = :uri;


  update bfw_ent_views ev
  set ev.sql_select = :ent_sql_select,
      ev.sql_insert = :ent_sql_insert,
      ev.sql_insertdef = :ent_sql_insertdef,
      ev.sql_update = :ent_sql_update,
      ev.sql_delete = :ent_sql_delete,
      ev.sql_refresh = :ent_sql_refresh,
      ev.sql_title = :ent_sql_title,
      ev.pkey = :ent_view_pkey,
      ev.readonly = :ent_view_readonly
  where ev.entityname = :ent and ev.viewname = :ent_view;
end^


ALTER PROCEDURE BFW_IDE_EV_UI_NEW (
    PKG_ VARCHAR(50))
RETURNS (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50))
AS
begin
  pkg = pkg_;
  suspend;
end^


ALTER PROCEDURE BFW_IDE_EV_UI_NEW_U (
    URI VARCHAR(50),
    CLS VARCHAR(50),
    TITLE VARCHAR(50),
    PKG VARCHAR(50),
    ENT VARCHAR(50),
    ENT_VIEW VARCHAR(50))
AS
begin
  ent = upper(ent);

  insert into bfw_ui(uri, cls, title, pkg, entityname, viewname)
  values(:uri, :cls, :title, :pkg, :ent, :ent_view);

  if (not exists(select * from bfw_ent_views where entityname = :ent and viewname = :ent_view)) then
  begin
    insert into bfw_ent_views(entityname, viewname)
    values(:ent, :ent_view);
  end
end^


ALTER PROCEDURE BFW_INF_SP_MSG_POP (
    FROM_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    SDAT DATE,
    SENDER VARCHAR(38),
    TOPIC VARCHAR(50),
    TXT VARCHAR(250))
AS
declare variable receiver varchar(38);
begin
  receiver = user;
  from_id_ = coalesce(from_id_, 0);

  for
    select m.id, m.idat, coalesce(u.name, m.sender),  m.topic, m.txt
    from bfw_inf_msg m
         left join bfw_sec_users u on (u.userid = m.sender)
    where m.receiver = :receiver and m.status = 0 and m.id > :from_id_
    order by m.id
    into :id, :sdat, :sender, :topic, :txt
  do
    suspend;

end^


ALTER PROCEDURE BFW_INF_SP_MSG_PUSH (
    RECEIVER_ VARCHAR(38),
    TOPIC_ VARCHAR(50),
    TXT_ VARCHAR(250))
AS
declare variable id integer;
begin
  receiver_ = upper(receiver_);
  id = gen_id(bfw_inf_msg_gen, 1);
  insert into bfw_inf_msg(id, receiver, topic, txt)
  values(:id, :receiver_, :topic_, :txt_);

end^


ALTER PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE (
    POLID_ VARCHAR(38),
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    USERID VARCHAR(38),
    USERNAME VARCHAR(50),
    PERM VARCHAR(50),
    STATE INTEGER,
    INHERITBY_POLID VARCHAR(38),
    INHERITBY_PERM VARCHAR(100),
    INHERITBY_RESID VARCHAR(38))
AS
declare variable permcheck varchar(38);
declare variable permid varchar(38);
declare variable resid varchar(38);
begin
  permid_ = nullif(permid_, '');
  for
    select userid, name
    from bfw_sec_users
    into :userid, :username
  do begin
    for
      select p.permid, p.name
      from bfw_sec_policies pl left join bfw_sec_permissions p  on (pl.polid = p.polid)
      where pl.polid = :polid_
            and ((:permid_ is null) or (:permid_ is not null and p.permid = :permid_))
      into :permcheck, :perm
    do begin
      state = null;
      inheritby_perm = null;
      inheritby_resid = null;
      permid = null;
      resid = null;
      for
        select distinct p.state, p.permid, p.resid
        from bfw_sec_ev_perm_effective_(:permcheck, :userid, :resid_) p
        into :state, :permid, :resid
      do begin
        select polid from bfw_sec_permissions where permid = :permid
        into :inheritby_polid;

        inheritby_resid = null;
        inheritby_perm = null;
        if (permid <> permcheck) then
        begin
          select pl.name || ' \ ' || p.name
          from bfw_sec_permissions p
               left join bfw_sec_policies pl on (p.polid = pl.polid)
          where p.permid = :permid
          into :inheritby_perm;
        end

        if (coalesce(resid, resid_) <> resid_) then
          inheritby_resid = resid;

        suspend;
      end
    end
  end
end^


ALTER PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE_ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER,
    PERMID VARCHAR(38),
    RESID VARCHAR(38))
AS
declare variable INHERITBY varchar(38);
declare variable INHERITBY_RES_SQL varchar(1024);
declare variable INHERITBY_RESID varchar(38);
declare variable RES_PARENT_SQL varchar(1024);
begin
  resid_ = coalesce(resid_, '');
  permid = permid_;
  resid = resid_;

  select p.inheritby, p.inheritby_res_sql, pol.res_parent_sql
  from bfw_sec_permissions p left join bfw_sec_policies pol on (pol.polid = p.polid)
  where p.permid = :permid_
  into :inheritby, :inheritby_res_sql, :res_parent_sql;

  for
    select state, permid, resid
    from bfw_sec_ev_perm_effective__(:permid_, :userid_, :resid_, :res_parent_sql)
    into :state, :permid, :resid
  do
    suspend;

  if (resid_ <> '') then -- check for all items
  begin
    resid = '';
    select a.state
    from bfw_sec_acl a
    where a.userid = :userid_ and a.permid = :permid_ and a.resid = ''
    into :state;
    if (state in (1, 2)) then
      suspend;
  end

  if (inheritby is not null) then
  begin
    inheritby_resid = null;
    if (coalesce(inheritby_res_sql, '') <> '' and resid_ <> '') then
    begin
      inheritby_res_sql = inheritby_res_sql || :resid_;
      for execute statement inheritby_res_sql
          into :inheritby_resid
      do begin
        inheritby_resid = coalesce(inheritby_resid, '');
        for
          select state, permid, resid
          from bfw_sec_ev_perm_effective_(:inheritby, :userid_, :inheritby_resid)
          into :state, :permid, :resid
        do
          suspend;
      end
    end

    state = null;
    select state, permid, resid from bfw_sec_ev_perm_effective_(:inheritby, :userid_, null)
    into :state, :permid, :resid;
    if (state in (1, 2)) then
      suspend;

  end
end^


ALTER PROCEDURE BFW_SEC_EV_PERM_EFFECTIVE__ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38),
    RES_PARENT_SQL_ VARCHAR(1024))
RETURNS (
    STATE INTEGER,
    PERMID VARCHAR(38),
    RESID VARCHAR(38))
AS
declare variable parent_resid varchar(38);
declare variable res_parent_sql varchar(1024);
begin
  resid_ = coalesce(resid_, '');
  permid = permid_;

  resid = resid_;
  select a.state
  from bfw_sec_acl a
  where a.userid = :userid_ and a.permid = :permid_ and a.resid = :resid_
  into :state;
  if (state in (1, 2)) then
    suspend;

  if ((coalesce(res_parent_sql_, '') <> '') and resid_ <> '') then
  begin
    res_parent_sql = res_parent_sql_ || :resid_;
    execute statement res_parent_sql into :parent_resid;
    parent_resid = coalesce(parent_resid, '');

    if (parent_resid <> '') then
      for
        select state, permid, resid
        from bfw_sec_ev_perm_effective__(:permid_, :userid_, :parent_resid, :res_parent_sql_)
        into :state, :permid, :resid
      do
        suspend;

  end


end^


ALTER PROCEDURE BFW_SEC_EV_PERM_LIST (
    POLID VARCHAR(38))
RETURNS (
    PERMID VARCHAR(38),
    NAME VARCHAR(50),
    DESCRIPTION VARCHAR(250),
    INHERITBY VARCHAR(100))
AS
begin
  for
    select p.permid, p.name, p.description, pli.name || ' \ ' || pi.name
    from bfw_sec_permissions p
         left join bfw_sec_permissions pi on (p.inheritby = pi.permid)
         left join bfw_sec_policies pli on (pli.polid = pi.polid)
    where p.polid = :polid
    into :permid, :name, :description, :inheritby
  do
    suspend;
end^


ALTER PROCEDURE BFW_SEC_EV_PERM_STATE_GET (
    PERMID VARCHAR(38),
    USERID VARCHAR(38),
    RESID VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
begin
  resid = coalesce(resid, '');
  select state
  from bfw_sec_acl p
  where p.resid = :resid and p.userid = :userid and p.permid = :permid
  into :state;
  state = coalesce(state, 0);
  suspend;
end^


ALTER PROCEDURE BFW_SEC_EV_PERM_STATE_SET (
    PERMID VARCHAR(38),
    USERID VARCHAR(38),
    RESID VARCHAR(38),
    STATE INTEGER)
AS
begin
  resid = coalesce(resid, '');

  if (state = 0) then
    delete from bfw_sec_acl p
       where p.resid = :resid and p.userid = :userid and p.permid = :permid;
  else
  begin
    if (exists(select * from bfw_sec_acl p
              where p.resid = :resid
                    and p.userid = :userid and p.permid = :permid)) then
     update bfw_sec_acl p
     set p.state = :state
     where p.resid = :resid and p.userid = :userid and p.permid = :permid;
    else
      insert into bfw_sec_acl(resid, userid, permid, state)
      values (:resid, :userid, :permid, :state);
  end
end^


ALTER PROCEDURE BFW_SEC_EV_POLICY_LIST (
    PARENTID VARCHAR(38))
RETURNS (
    POLID VARCHAR(38),
    NAME VARCHAR(50),
    RES_PROVID VARCHAR(38))
AS
begin
  for
    select p.polid, p.name, p.res_provid
    from bfw_sec_policies p
    where p.parentid is null and coalesce(:parentid, '') = ''
    union all
    select p.polid, p.name, p.res_provid
    from bfw_sec_policies p
    where p.parentid = :parentid and coalesce(:parentid, '') <> ''
    into :polid, :name, :res_provid
  do
    suspend;
end^


ALTER PROCEDURE BFW_SEC_EV_POLICY_RESET (
    POLID_ VARCHAR(38))
AS
begin
  delete from bfw_sec_acl a
  where a.permid in (select p.permid from bfw_sec_permissions p where p.polid = :polid_);
end^


ALTER PROCEDURE BFW_SEC_EV_POLICY_STATE_GET (
    POLID VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
begin
  select state
  from bfw_sec_policies p where p.polid= :polid
  into :state;
  state = coalesce(state, 0);
  suspend;
end^


ALTER PROCEDURE BFW_SEC_EV_POLICY_STATE_SET (
    POLID VARCHAR(38),
    STATE INTEGER)
AS
begin
  update bfw_sec_policies p
  set p.state = :state
  where p.polid = :polid;
end^


ALTER PROCEDURE BFW_SEC_SP_PERM_CHECK (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
declare variable unrestricted_perm varchar(38) = 'builtin.unrestricted' ;
begin
  resid_ = coalesce(resid_, '');

-- check unrestricted user
  select a.state
  from bfw_sec_acl a
  where a.permid = :unrestricted_perm and a.userid = :userid_ and a.resid = ''
        and a.state = 1
  into :state;

  if (coalesce(state, 0) = 1) then
  begin
    suspend;
    exit;
  end

-- check unrestricted role
  select first 1 a.state
  from bfw_sec_acl a
       left join bfw_sec_user_roles r on (a.userid = r.roleid)
  where a.permid = :unrestricted_perm and r.userid = :userid_ and a.resid = ''
        and a.state = 1
  into :state;

  if (coalesce(state, 0) = 1) then
  begin
    suspend;
    exit;
  end

-- check all
  select state from bfw_sec_sp_perm_check_(:permid_, :userid_, :resid_)
  into :state;
  suspend;


end^


ALTER PROCEDURE BFW_SEC_SP_PERM_CHECK_ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
declare variable pol_state integer;
declare variable inheritby_permid varchar(38);
declare variable inheritby_resid varchar(38);
declare variable res_parent_sql varchar(1024);
declare variable inheritby_res_sql varchar(1024);
begin
  resid_ = coalesce(resid_, '');

-- check inactive policy
  select p.inheritby, p.inheritby_res_sql, pol.res_parent_sql, pol.state
  from bfw_sec_permissions p left join bfw_sec_policies pol on (pol.polid = p.polid)
  where p.permid = :permid_
  into :inheritby_permid, :inheritby_res_sql, :res_parent_sql, :pol_state;

  if (pol_state <> 1) then
  begin
    state = 1;
    suspend;
    exit;
  end

-- check item and parents

  select state from bfw_sec_sp_perm_check__(:permid_, :userid_, :resid_, :res_parent_sql)
  into :state;

  if (state in (1, 2)) then
  begin
    suspend;
    exit;
  end

  if (inheritby_permid is not null) then
  begin
    if ((coalesce(inheritby_res_sql, '') <> '') and resid_ <> '') then
    begin
      inheritby_res_sql = inheritby_res_sql || :resid_;
      for execute statement inheritby_res_sql
          into :inheritby_resid
      do begin
        inheritby_resid = coalesce(inheritby_resid, '');
        select state from bfw_sec_sp_perm_check_(:inheritby_permid, :userid_, :inheritby_resid)
        into :state;
        if (state in (1, 2)) then
        begin
          suspend;
          exit;
        end
      end
    end

    select state from bfw_sec_sp_perm_check_(:inheritby_permid, :userid_, null)
    into :state;
    suspend;
    exit;

  end


  state = 0;
  suspend;
end^


ALTER PROCEDURE BFW_SEC_SP_PERM_CHECK__ (
    PERMID_ VARCHAR(38),
    USERID_ VARCHAR(38),
    RESID_ VARCHAR(38),
    RES_PARENT_SQL_ VARCHAR(1024))
RETURNS (
    STATE INTEGER)
AS
declare variable roleid varchar(38);
declare variable parent_resid varchar(38);
declare variable res_parent_sql varchar(1024);
begin

-- check user
  select a.state
  from bfw_sec_acl a
  where a.permid = :permid_ and a.userid = :userid_ and a.resid = :resid_
  into :state;

  if (state in (1, 2)) then
  begin
    suspend;
    exit;
  end

  if (resid_ <> '') then --check for all items
  begin
    select a.state
    from bfw_sec_acl a
    where a.permid = :permid_ and a.userid = :userid_ and a.resid = ''
    into :state;

    if (state in (1, 2)) then
    begin
      suspend;
      exit;
    end
  end



-- check for roles
  for
    select r.roleid
    from bfw_sec_user_roles r
    where r.userid = :userid_
    into :roleid
  do begin
    select a.state
    from bfw_sec_acl a
    where a.userid = :roleid and a.permid = :permid_ and a.resid = :resid_
    into :state;

    if (state in (1, 2)) then
    begin
      suspend;
      exit;
    end
  end

  if (resid_ <> '') then -- check for all items
  begin
    for
      select r.roleid
      from bfw_sec_user_roles r
      where r.userid = :userid_
      into :roleid
    do begin
      select a.state
      from bfw_sec_acl a
      where a.userid = :roleid and a.permid = :permid_ and a.resid = ''
      into :state;

      if (state in (1, 2)) then
      begin
        suspend;
        exit;
      end
    end
  end

-- check parent res

  if ((coalesce(res_parent_sql_, '') <> '') and resid_ <> '') then
  begin
    res_parent_sql = res_parent_sql_ || :resid_;
    execute statement res_parent_sql into :parent_resid;

    if (coalesce(parent_resid, '') <> '') then
      select p.state
      from bfw_sec_sp_perm_check__(:permid_, :userid_, :parent_resid, :res_parent_sql_) p
      into :state;
  end

  state = coalesce(state, 0);
  suspend;

end^


ALTER PROCEDURE BFW_SEC_SP_PERM_DEMAND (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
AS
declare variable userid  varchar(38);
declare variable pstate integer;
declare variable pname varchar(250);
begin
  userid = user;
  select state from bfw_sec_sp_perm_check(:permid_, :userid, :resid_)
  into :pstate;

  if (pstate <> 1) then
  begin
    select name from bfw_sec_permissions p where p.permid = :permid_
    into :pname;

    pname = coalesce(pname, permid_);

    pname = 'No permission for: ' || pname;
    exception bfw_sec_raise :pname;

  end
end^


ALTER PROCEDURE BFW_SEC_SP_PERM_DEMAND_USERS (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    USERID VARCHAR(38))
AS
declare variable state integer;
begin
  for
    select u.userid
    from bfw_sec_users u
    where u.isrole = 0
    into :userid 
  do begin
    select state from bfw_sec_sp_perm_check(:permid_, :userid, :resid_)
    into :state;

    if (state = 1) then suspend;
  end
end^


ALTER PROCEDURE BFW_SEC_SP_PERM_DEMAND2 (
    PERMID_ VARCHAR(38),
    RESID_ VARCHAR(38))
RETURNS (
    STATE INTEGER)
AS
declare variable userid  varchar(38);
begin
  userid = user;
  select state from bfw_sec_sp_perm_check(:permid_, :userid, :resid_)
  into :state;
  suspend;
end^


ALTER PROCEDURE CBR_EV_KORD_CREATE (
    ORD_ID_ INTEGER)
RETURNS (
    ID INTEGER)
AS
declare variable check_ integer;
declare variable const_state_active integer = 1;
declare variable const_state_precheck integer = 2;
declare variable ordi_id integer;
declare variable kordi_id integer;
begin
  id = null;

  select count(*)
  from cbr_ord h
       left join cbr_ordi i on (h.id = i.hid)
  where h.id = :ord_id_ and h.state_id < :const_state_precheck
        and i.kord_id is null
        and i.id is not null
  into :check_;

  if (coalesce(check_, 0) > 0) then
  begin
    update cbr_ord
    set state_id = :const_state_active
    where id = :ord_id_;

    id = gen_id(cbr_gen_doc, 1);
    insert into cbr_kord(id, dat, ord_id)
    values(:id, 'today', :ord_id_);

    for
      select i.id
      from cbr_ord h
           left join cbr_ordi i on (h.id = i.hid)
      where h.id = :ord_id_ and i.kord_id is null
      into :ordi_id
    do begin
      kordi_id = gen_id(cbr_gen_doc, 1);
      insert into cbr_kordi(id, hid, ordi_id)
      values(:kordi_id, :id, :ordi_id);

      update cbr_ordi
      set kord_id = :id
      where id = :ordi_id;

    end
  end
  suspend;
end^


ALTER PROCEDURE CBR_EV_MENU_ITEM (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    STATE_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
begin
  select id, name, grp_id, state_id, idx, addon_grp_id, kitchen_id
  from cbr_menu
  where id = :id_
  into :id, :name, :grp_id, :state_id, :idx, :addon_grp_id, :kitchen_id;
  suspend;
end^


ALTER PROCEDURE CBR_EV_MENU_ITEM_U (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    STATE_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
begin
  update cbr_menu
  set name = :name,
      grp_id = :grp_id,
      state_id = :state_id,
      idx = :idx,
      addon_grp_id = :addon_grp_id,
      kitchen_id = :kitchen_id
  where id = :id;
end^


ALTER PROCEDURE CBR_EV_MENU_LIST (
    ID_ INTEGER,
    SHOW_CLOSED_ INTEGER)
RETURNS (
    ID INTEGER,
    GRP VARCHAR(50),
    NAME VARCHAR(50),
    IDX INTEGER,
    ADDON_GRP VARCHAR(50),
    KITCHEN VARCHAR(50),
    STATE VARCHAR(50),
    UI_ROW_STYLE VARCHAR(50))
AS
declare variable state_id integer;
begin
  for
    select i.id, i.name, g.name, i.idx, a.name, k.name,
       (select e.name from inf_sp_enum_get('cbr_menu', 'state_id', i.state_id) e),
       i.state_id
    from cbr_menu i
         left join cbr_menu_grp g on (g.id = i.grp_id)
         left join cbr_menu_grp a on (a.id = i.addon_grp_id)
         left join cbr_kitchens k on (k.id = i.kitchen_id)
    where ((:id_ is not null and i.id = :id_) or (:id_ is null))
          and
            ((:show_closed_ = 1) or (:show_closed_ = 0 and i.state_id < 3))
    order by g.name, i.name
    into :id, :name, :grp, :idx, :addon_grp, :kitchen, :state, :state_id
  do begin
    ui_row_style = null;
    if (state_id = 3) then
      ui_row_style = 'Style.Hidden';


    suspend;
  end
end^


ALTER PROCEDURE CBR_EV_MENU_NEW
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
begin
  id = gen_id(cbr_gen, 1);

  suspend;
end^


ALTER PROCEDURE CBR_EV_MENU_NEW_U (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    IDX INTEGER,
    ADDON_GRP_ID INTEGER,
    KITCHEN_ID INTEGER)
AS
begin
  insert into cbr_menu(id, name, grp_id, state_id, idx, addon_grp_id, kitchen_id)
  values(:id, :name, :grp_id, 1, :idx, :addon_grp_id, :kitchen_id);

end^


ALTER PROCEDURE CBR_EV_ORD_CREATE (
    TBL_ID_ INTEGER)
RETURNS (
    ID INTEGER)
AS
declare variable price_typ_id integer;
begin
  select first 1 id from cbr_price_typ pt
  into :price_typ_id;

  id = gen_id(cbr_gen_doc, 1);
  insert into cbr_ord(id, dat, tbl_id, price_typ_id)
  values(:id, 'today', :tbl_id_, :price_typ_id);

  suspend;
end^


ALTER PROCEDURE CBR_EV_ORD_DEL (
    ID_ INTEGER)
AS
declare variable state_id integer;
begin
  select state_id from cbr_ord where id = :id_
  into :state_id;

  if (state_id > 0) then
    execute procedure inf_raise('CBR_ORD.DELETE.CHK_STATE');

  if (exists(select * from cbr_ordi i where i.hid = :id_)) then
    execute procedure inf_raise('CBR_ORD.DELETE.NOT_EMPTY');

  delete from cbr_ord where id = :id_;
end^


ALTER PROCEDURE CBR_EV_ORD_DESK_MENU (
    GRP_ID_ INTEGER,
    PARENT_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    GRP_ID INTEGER,
    PARENT_ID INTEGER)
AS
declare variable addon_grp_id1 integer;
declare variable addon_grp_id2 integer;
begin
  parent_id = parent_id_;
  if (parent_id is not null) then
  begin
    select g.addon_grp_id, m.addon_grp_id
    from cbr_ordi i
         left join cbr_menu m on (i.menu_id = m.id)
         left join cbr_menu_grp g on (g.id = m.grp_id)
    where i.id = :parent_id
    into :addon_grp_id1, :addon_grp_id2;
  end

  for
    select m.id, m.name, m.grp_id
    from cbr_menu m
    where m.grp_id = :grp_id_ and :parent_id_ is null
          and m.state_id = 1
          and exists (select * from cbr_price p where p.menu_id = m.id)
    union all
    select m.id, m.name, m.grp_id
    from cbr_menu m
    where :parent_id_ is not null and m.state_id = 1
          and m.grp_id in (:addon_grp_id1, :addon_grp_id2)
          and exists (select * from cbr_price p where p.menu_id = m.id)
    into :id, :name, :grp_id
  do suspend;
end^


ALTER PROCEDURE CBR_EV_ORD_DETAIL_DEL (
    ID_ INTEGER)
AS
begin
  delete from cbr_ordi where id = :id_;
end^


ALTER PROCEDURE CBR_EV_ORD_DETAIL_NEW (
    HID_ INTEGER,
    MENU_ID_ INTEGER,
    PARENT_ID_ INTEGER)
RETURNS (
    ID INTEGER,
    HID INTEGER,
    MENU_ID INTEGER,
    DISH VARCHAR(50),
    QTY DOUBLE PRECISION,
    PRICE DOUBLE PRECISION,
    SUMM DOUBLE PRECISION,
    PARENT_ID INTEGER,
    FKORD INTEGER)
AS
declare variable dat date;
declare variable price_typ_id integer;
begin
  id = gen_id(cbr_gen_doc, 1);
  hid = hid_;
  menu_id = menu_id_;
  parent_id = parent_id_;
  fkord = 0;

  select name from cbr_menu where id = :menu_id
  into :dish;


  if (parent_id is not null) then
    dish = '  +' || dish;

  qty = 1;

  select h.dat, h.price_typ_id
  from cbr_ord h
  where id = :hid
  into :dat, :price_typ_id;

  select first 1 p.price
  from cbr_price p
  where p.menu_id = :menu_id and p.dat <= :dat and p.typ_id = :price_typ_id
  order by p.dat desc
  into :price;

  summ = qty * price;



  suspend;
end^


ALTER PROCEDURE CBR_EV_ORD_DETAILS (
    ID_ INTEGER,
    HID_ INTEGER)
RETURNS (
    ID INTEGER,
    HID INTEGER,
    RECNO INTEGER,
    MENU_ID INTEGER,
    DISH VARCHAR(50),
    QTY DOUBLE PRECISION,
    PRICE DOUBLE PRECISION,
    SUMM DOUBLE PRECISION,
    FKORD INTEGER,
    PARENT_ID INTEGER,
    UI_ROW_STYLE VARCHAR(50))
AS
declare variable kord_id integer;
begin
  recno = 0;
  for
    select i.id, i.hid, i.menu_id, m.name,  i.qty, i.price, i.qty * i.price,
           i.kord_id, i.parent_id
    from cbr_ordi i left join cbr_menu m on (m.id = i.menu_id)
    where i.hid = :hid_ and :id_ is null
    union all
    select i.id, i.hid, i.menu_id, m.name, i.qty, i.price, i.qty * i.price,
           i.kord_id, i.parent_id
    from cbr_ordi i left join cbr_menu m on (m.id = i.menu_id)
    where i.id = :id_ and :id_ is not null
    order by 1
    into :id, :hid, :menu_id, :dish, :qty, :price, :summ,
         :kord_id, :parent_id
  do begin
    recno = recno + 1;

    if (parent_id is not null) then
      dish = '  +' || dish;

    if (kord_id is null) then
      fkord = 0;
    else
      fkord = 1;

    ui_row_style = null;
    if (fkord = 1) then
      ui_row_style = 'Style.InfoBk';
    suspend;
  end
end^


ALTER PROCEDURE CBR_EV_ORD_HEAD (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP)
AS
declare variable state_id integer;
begin
  for

    select h.id, h.dat, room.name, tbl.name, h.state_id, h.idat, sum(i.qty * i.price)
    from cbr_ord h
         left join cbr_ordi i on (i.hid = h.id)
         left join cbr_tbl tbl on (tbl.id =h.tbl_id)
         left join cbr_rooms room on (room.id = tbl.room_id)
    where h.id = :id_
    group by h.id, h.dat, room.name, tbl.name, h.state_id, h.idat
    into :id, :dat, :room, :tbl, :state_id, :idat, :summ
  do begin
    select name from inf_sp_enum_get('cbr_ord', 'state_id', :state_id)
    into :state;
    suspend;
  end
end^


ALTER PROCEDURE CBR_EV_ORD_LIST (
    ID_ INTEGER,
    DBEG_ DATE,
    DEND_ DATE)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP)
AS
declare variable state_id integer;
begin
  for
    select h.id, h.dat, room.name, tbl.name, h.state_id, h.idat, sum(i.qty * i.price)
    from cbr_ord h
         left join cbr_ordi i on (i.hid = h.id)
         left join cbr_tbl tbl on (tbl.id =h.tbl_id)
         left join cbr_rooms room on (room.id = tbl.room_id)
    where :id_ is null and h.dat between :dbeg_ and :dend_
    group by h.id, h.dat, room.name, tbl.name, h.state_id, h.idat
    union all
    select h.id, h.dat, room.name, tbl.name, h.state_id, h.idat, sum(i.qty * i.price)
    from cbr_ord h
         left join cbr_ordi i on (i.hid = h.id)
         left join cbr_tbl tbl on (tbl.id =h.tbl_id)
         left join cbr_rooms room on (room.id = tbl.room_id)
    where :id_ is not null and h.id = :id_ and h.dat between :dbeg_ and :dend_
    group by h.id, h.dat, room.name, tbl.name, h.state_id, h.idat
    into :id, :dat, :room, :tbl, :state_id, :idat, :summ
  do begin
    select name from inf_sp_enum_get('cbr_ord', 'state_id', :state_id)
    into :state;
    suspend;
  end
end^


ALTER PROCEDURE CBR_EV_ORD_PAYT (
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    DAT DATE,
    ROOM VARCHAR(50),
    TBL VARCHAR(50),
    SUMM DOUBLE PRECISION,
    STATE VARCHAR(50),
    IDAT TIMESTAMP,
    SUMM_PAYT DOUBLE PRECISION,
    SUMM_RET DOUBLE PRECISION)
AS
declare variable state_id integer;
begin
  select h.id, h.dat, room.name, tbl.name, h.state_id, h.idat, sum(i.qty * i.price)
  from cbr_ord h
       left join cbr_ordi i on (i.hid = h.id)
       left join cbr_tbl tbl on (tbl.id =h.tbl_id)
       left join cbr_rooms room on (room.id = tbl.room_id)
  where h.id = :id_
  group by h.id, h.dat, room.name, tbl.name, h.state_id, h.idat
  into :id, :dat, :room, :tbl, :state_id, :idat, :summ;

  select name from inf_sp_enum_get('cbr_ord', 'state_id', :state_id)
  into :state;

  summ_payt = null;
  summ_ret = 0;
  suspend;

end^


ALTER PROCEDURE CBR_EV_ORD_PAYT_U (
    ID_ INTEGER,
    SUMM_PAYT DOUBLE PRECISION)
AS
declare variable summ double precision;
begin
  select sum(i.qty * i.price)
  from cbr_ord h
       left join cbr_ordi i on (i.hid = h.id)
  where h.id = :id_
  into :summ;

  if (coalesce(summ_payt, 0) < coalesce(summ, 0)) then
    exception raise 'Недостаточная сумма оплаты!';

  update cbr_ord h
  set state_id = 3,
      payt_time = 'now',
      payt_summ = :summ_payt
  where h.id = :id_;
end^


ALTER PROCEDURE CBR_EV_ORD_PRECHECK (
    ID INTEGER)
AS
begin
  if (exists (select * from cbr_ordi i where i.hid = :id and i.kord_id is null )) then
    execute procedure inf_raise('ERROR.PRECHECK');

  update cbr_ord set state_id = 2 where id = :id;
end^


ALTER PROCEDURE CBR_EV_ORD_SELECTOR (
    DAT1_ DATE,
    DAT2_ DATE)
RETURNS (
    DAT1 DATE,
    DAT2 DATE,
    INFO VARCHAR(250))
AS
begin
  dat1 = coalesce(dat1_, 'today');
  dat2 = coalesce(dat2_, 'today');
  info = 'Интервал дат ' || dat1 || ' - ' || dat2;
  suspend;
end^


ALTER PROCEDURE CBR_EV_PRICE_LIST (
    DAT_ DATE,
    TYP_ID_ INTEGER)
RETURNS (
    MENU_ID INTEGER,
    DAT DATE,
    TYP_ID INTEGER,
    GRP VARCHAR(50),
    DISH VARCHAR(50),
    PRICE DOUBLE PRECISION,
    PRICE_NEW DOUBLE PRECISION)
AS
declare variable price_id integer;
begin
  dat = :dat_;
  typ_id = :typ_id_;

  if (dat is null or typ_id is null) then exit;

  for
    select m.id, g.name, m.name
    from cbr_menu m left join cbr_menu_grp g on (m.grp_id = g.id)
    where m.state_id < 3
    order by g.name, m.name
    into :menu_id, :grp, :dish
  do begin
    price = null;
    price_new = null;
    price_id = null;

    select first 1 p.price
    from cbr_price p
    where p.menu_id = :menu_id and p.typ_id = :typ_id and p.dat < :dat
    order by p.dat desc
    into :price;

    select p.id, p.price
    from cbr_price p
    where p.menu_id = :menu_id and p.typ_id = :typ_id and p.dat = :dat
    into :price_id, :price_new;


    suspend;
  end
end^


ALTER PROCEDURE CBR_EV_PRICE_LIST_SEL (
    DAT_ DATE,
    TYP_ID_ INTEGER)
RETURNS (
    DAT DATE,
    TYP_ID INTEGER,
    INFO VARCHAR(250))
AS
declare variable typ varchar(50);
begin
  dat = coalesce(dat_, 'TODAY');
  typ_id = typ_id_;

  if (typ_id is null) then
    select first 1 id
    from cbr_price_typ
    order by id
    into :typ_id;

  if (typ_id is null) then
    typ = 'УКАЖИТЕ ТИП ЦЕН';
  else
    select name from cbr_price_typ where id = :typ_id
    into :typ;

  info = 'На дату: ' || dat || '   Тип цен:' || typ;

  suspend;
end^


ALTER PROCEDURE CBR_EV_PRICE_LIST_U (
    MENU_ID INTEGER,
    DAT DATE,
    TYP_ID INTEGER,
    PRICE_NEW DOUBLE PRECISION)
AS
declare variable price_id integer;
begin
  select p.id
  from cbr_price p
  where p.menu_id = :menu_id and p.dat = :dat and p.typ_id = :typ_id
  into :price_id;

  if (price_id is null) then
  begin
    if (price_new is null) then exit;
    price_id = gen_id(cbr_gen_doc, 1);
    insert into cbr_price(id, menu_id, typ_id, dat, price)
    values(:price_id, :menu_id, :typ_id, :dat, :price_new);
  end
  else
  begin
    if (price_new is not null) then
      update cbr_price
      set price = :price_new
      where id = :price_id;
    else
      delete from cbr_price where id = :price_id;

  end
end^


ALTER PROCEDURE INF_RAISE (
    MSG_CODE VARCHAR(50))
AS
declare variable msg varchar(70);
begin
  msg_code = upper(msg_code);
  select msg from inf_msg m where m.code = :msg_code
  into :msg;
  exception raise :msg;
end^


ALTER PROCEDURE INF_SP_ENUM_GET (
    TABLENAME_ VARCHAR(50),
    FIELDNAME_ VARCHAR(50),
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50))
AS
begin
  select e.id, e.name, e.code
  from inf_enum e
  where e.tablename = upper(:tablename_)
        and e.fieldname = upper(:fieldname_)
        and e.id = :id_
  into :id, :name, :code;
  suspend;
end^


ALTER PROCEDURE INF_SP_ENUM_LOOKUP (
    TABLENAME_ VARCHAR(50),
    FIELDNAME_ VARCHAR(50),
    SHOWNONE_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50))
AS
begin
  for
    select e.id, e.name
    from inf_enum e
    where e.tablename = upper(:tablename_)
          and e.fieldname = upper(:fieldname_)
          and e.id = 0 and :shownone_ = 1
    union
    select e.id, e.name
    from inf_enum e
    where e.tablename = upper(:tablename_)
          and e.fieldname = upper(:fieldname_)
          and e.id <> 0
    into :id, :name
  do
    suspend;
end^


ALTER PROCEDURE INF_SP_STATES_GET (
    TABLENAME_ VARCHAR(50),
    ID_ INTEGER)
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50),
    DRANGE INTEGER)
AS
begin
  select id, name, code, drange
  from inf_states
  where tablename = upper(:tablename_)
        and id = :id_
  into :id, :name, :code, :drange;
  suspend;
end^


ALTER PROCEDURE INF_SP_STATES_LIST (
    TABLE_NAME_ VARCHAR(50))
RETURNS (
    ID INTEGER,
    NAME VARCHAR(50),
    CODE VARCHAR(50),
    DRANGE INTEGER)
AS
begin
  for
    select s.id, s.name, s.code, s.drange
    from inf_states s
    where s.tablename = upper(:table_name_)
    order by s.id
    into :id, :name, :code, :drange
  do
    suspend;
end^


ALTER PROCEDURE UTL_EV_JRN_SELECTOR (
    DATE1_ DATE,
    DATE2_ DATE)
RETURNS (
    DATE1 DATE,
    DATE2 DATE)
AS
begin
  date1 = coalesce(date1_, 'today');
  date2 = coalesce(date2_, 'today');
  suspend;
end^


ALTER PROCEDURE UTL_EV_JRN_SELECTORINFO (
    USE_DRANGE_ INTEGER,
    DATE1_ DATE,
    DATE2_ DATE)
RETURNS (
    INFO VARCHAR(250))
AS
begin
  use_drange_ = coalesce(use_drange_, 1);

  if (use_drange_ = 1) then
  begin
    if (date1_ is null or date2_ is null) then
      info = '';
    else
      info = 'Интервал дат ' || date1_ || ' - ' || date2_;
  end
  else
    info = '';

  suspend;
end^



SET TERM ; ^


/******************************************************************************/
/***                              Descriptions                              ***/
/******************************************************************************/

DESCRIBE TABLE BFW_UI_STYLES
'OPTIONS:
color={red,yellow,green etc... + InfoBk};
font.style={bold,italic,underline,srikeout};
font.color={color}

Use static:
Set in ENT_FIELDS.OPTIONS "Style=<id style>" for content and
  "Style.Header=<id style>" for header

Use dynamics:
In select or strored procedure define fields
 UI_ROW_STYLE for row style or UI_<FIELD_NAME>_STYLE for field style
 and set id style

Sample define style:
ID = "style1"
OPTIONS = "Color=InfoBk;Font.Style=Bold"';



/******************************************************************************/
/***                          Fields descriptions                           ***/
/******************************************************************************/

DESCRIBE FIELD INHERITBY_RES_SQL TABLE BFW_SEC_PERMISSIONS
'format sql statement:
select cast(t.fieldname as varchar(38)) from tablename t where t.fieldname=';

DESCRIBE FIELD RES_PARENT_SQL TABLE BFW_SEC_POLICIES
'format sql statement:
select cast(t.parentfieldname as varchar(38)) from tablename t where t.fieldname=';

DESCRIBE FIELD HANDLER TABLE BFW_UI_CMD
'1) activity URI
2) command(s) separate by '','' or '';''';

DESCRIBE FIELD HANDLER_FOR TABLE BFW_UI_CMD
'command(s) id (CMD) separate by '','' or '';''';

DESCRIBE FIELD OPTIONS TABLE BFW_UI_CMD
'CloseViewBefore,CloseViewAfter,Hidden';

DESCRIBE FIELD CONDITION TABLE BFW_UI_CMD
'1) Entity=EntityName;EView=EntityViewName - sql must return integer value (0, 1)
2) empty - check by condition_params
Options:
RunOnce - check on UI first show
SetUnavailable - when condtion not passed set command state Unavailable';

DESCRIBE FIELD CONDITION_PARAMS TABLE BFW_UI_CMD
'1) Param1=Data1;Param2=Data2  (Param1, Param2 - sql params; Data1, Data2 - UI.Data)
2) Data1=[Value];Data2=NotEmpty (Data1, Data2 - UI.Data)';

